{"version":3,"sources":["config/video.ts","constants/global.ts","components/Viewport.tsx","math/Vector.ts","math/Point.ts","utils/typeCheckHelpers.ts","math/Segment.ts","constants/event.ts","core/Block.ts","core/Element.ts","models/blocks/structure/Structure.ts","models/blocks/structure/Door.ts","components/Door.tsx","assets/Door1.png","assets/Door0.png","models/blocks/structure/Wall.ts","assets/Wall.png","components/Wall.tsx","assets/Player0.png","components/Player.tsx","models/blocks/Floor.ts","assets/Floor.png","components/Floor.tsx","components/Void.tsx","components/Torch.tsx","assets/Torch.png","assets/Quadruped0.png","components/Cow.tsx","components/Goat.tsx","components/Pig.tsx","components/Sheep.tsx","components/index.ts","models/Image.ts","controllers/Camera.ts","utils/index.ts","math/Ray.ts","core/Raycaster.ts","controllers/Sight.ts","components/Sight.tsx","controllers/Light.ts","components/LightMask.tsx","app/hooks.ts","models/Time.ts","models/level/Level.ts","config/control.ts","models/level/Surface.ts","models/entity/Entity.ts","models/Player.ts","config/world.ts","models/blocks/index.ts","models/blocks/light/Torch.ts","models/blocks/light/Light.ts","models/entity/mobs/Mob.ts","models/entity/mobs/Cow.ts","models/entity/mobs/Goat.ts","models/entity/mobs/Sheep.ts","models/entity/mobs/Pig.ts","models/entity/item/Item.ts","models/item/Door.ts","models/item/Item.ts","models/entity/index.ts","models/entity/item/Door.ts","models/item/index.ts","features/world/worldSlice.ts","hooks/useIteration.ts","containers/scene/Players.tsx","containers/scene/Blocks.tsx","constants/itemModel.ts","assets/door.png","components/Item.tsx","containers/scene/Entities.tsx","containers/scene/Scene.tsx","assets/GUI0.png","containers/HUD/HitPoint.tsx","containers/HUD/HealthBar.tsx","containers/HUD/HotBarGrid.tsx","assets/hotbargrid.png","containers/HUD/HotBar.tsx","containers/UserInterface.tsx","constants/actionType.ts","constants/action.ts","constants/direction.ts","controllers/control.ts","containers/Main.tsx","constants/stageType.ts","controllers/receiver.ts","containers/Title.tsx","controllers/Client.ts","containers/App.tsx","containers/Entry.tsx","reportWebVitals.ts","index.tsx"],"names":["video","GLOBAL","Component","width","height","children","Vector","xOrValue","y","x","undefined","Error","this","vOrX","v","length","normalize","multiply","scalar","divideScalar","Math","round","sqrt","isEqual","a","b","Point","obj","isNaN","Number","threshold","floor","ceil","pos","first","second","third","Array","isArray","Segment","startOrValue","end","start","segment","copy","EVENT","ELEMENT","CREATE","DESTROY","UPDATE","WORLD","DAYLIGHT_CYCLE","PLAYERS","JOIN","MOVE","SURFACE","MOB","PLAYER","Block","id","layer","aspect","isConcrete","clone","add","up","UNIT_LENGTH","right","down","left","lastTime","timer","setInterval","update","bind","fps","listener","on","clearInterval","emit","create","EventEmitter","Structure","type","pattern","frames","map","frame","Door","toward","isOpen","TYPE","WOOD","STONE","PATTERNS","NORTH_SOUTH","EAST_WEST","size","benchmark","tilePosition","DoorClass","key","image","memo","Wall","INDIVIDUAL","INTERSECTION","T","T_90_DEG","T_180_DEG","T_270_DEG","TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT","WallClass","wallPng","playerPng","Floor","TYPES","PLAIN","TILE","HORIZONTAL","LEFT","MIDDLE","RIGHT","VERTICAL","TOP","BOTTOM","GRID","TOP_CENTER","MIDDLE_LEFT","MIDDLE_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","FloorClass","floorPng","data","draw","g","clear","beginFill","drawRect","endFill","Torch","QuadrupedPng","constructors","Player","Cow","Goat","Sheep","Pig","Void","Image","target","position","Sprite","constructor","name","gridSize","Camera","fov","RENDER_ROWS","near","far","layers","val","subtract","farPlaneBound","mag","sources","i","Object","prototype","hasOwnProperty","call","elements","visibilty","images","filter","element","isWithin","transform","sort","order","cameraPosProjection","RENDER_COLUMNS","VIEWPORT_COLUMNS","VIEWPORT_ROWS","halfHeight","halfWidth","center","set","point","Ray","origin","direction","t","ray","Raycaster","Infinity","seg","rpx","rpy","rdx","rdy","spx","spy","sdx","sdy","T2","T1","distance","param","angle","atan","Sight","camera","observer","bound","structuresLayer","offset","obstructors","flat","concat","intersects","barrier","reduce","result","has","filtered","push","Set","uniquePoint","atan2","dx","cos","dy","sin","rayCaster","closestIntersect","intersect","blurSize","path","visibility","area","blindSpot","useCallback","beginHole","drawPolygon","endHole","filters","BlurFilter","Light","lightsLayer","segments","lightImages","lightImage","angles","PI","vertices","at","tan","lightLevel","renderer","skylightLevel","areas","light","useMemo","PIXI","forEach","vertex","lightSprite","generateTexture","NEAREST","mask","useAppSelector","useSelector","Time","dayTime","TICK_PERIOD","DAY_PERIOD","Level","time","spawnPos","blocks","entities","border","find","block","source","index","findIndex","splice","entity","uid","found","destroy","console","error","UNIT_SIZE","KEYNAME","Surface","Entity","facing","rotation","speed","motion","isMotion","health","inventory","abilities","acceleration","accelerate","isZero","brake","move","TICK_PER_SEC","unit","vec","world","level","players","player","Mob","mass","attributes","Item","age","count","slot","item","DoorItem","worldSlice","createSlice","initialState","reducers","initLevel","state","action","payload","updateLightlevel","updateStructure","updateBlock","updateEntity","clearEntity","initPlayer","movePlayer","moveTo","initPlayers","removePlayer","addPlayer","movePlayerById","playersObtain","actions","selectLevel","selectPlayer","selectPlayerInventory","selectPlayers","useIteration","inc","useState","setI","useTick","delta","Players","batch","Blocks","itemModel","shift","scale","anchor","Entities","Scene","cameraRef","useRef","useApp","current","capture","values","LightMask","HitPoint","isFull","GUIPng","HealthBar","hitPoints","from","HotBarGrid","text","toString","style","TextStyle","fontSize","fill","HotBar","gridNumber","grids","_v","UserInterface","ACTION_TYPE","LEVEL","INIT","LIGHTLEVEL","STRUCTURE","CLEAR","ENTITY","INTERACT","LEAVE","OBTAIN","freeze","Action","dir","interact","DIRECTION","Controller","keysPressed","client","document","body","addEventListener","keydownHandler","keyupHandler","evt","moveControl","interactControl","send","keys","controlConfig","UP_KEY","RIGHT_KEY","NORTH_EAST","DOWN_KEY","SOUTH_EAST","LEFT_KEY","SOUTH_WEST","NORTH_WEST","NORTH","EAST","SOUTH","WEST","STAGE_TYPE","Main","username","location","clientRef","dispatch","useDispatch","useEffect","window","WebSocket","connect","setUp","onAction","release","then","receiver","alert","Title","setStage","fontFamily","strokeThickness","buttonMode","interactive","click","event","MAIN","Client","user","ws","buffer","callback","url","protocols","Promise","resolve","JSON","stringify","onclose","e","log","onerror","onmessage","parse","onopen","readyState","CLOSED","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","App","TITLE","stage","Viewport","Entry","usernameEl","locationEl","setUsername","setLocation","ref","placeholder","onChange","value","onClick","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","MOUNT_NODE","getElementById","render"],"mappings":"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","file":"static/js/main.f9ff40ab.chunk.js","sourcesContent":["export enum video {\r\n    aspect = 1,\r\n    gridSize = 32,\r\n    fps = 30\r\n}","enum GLOBAL {\r\n    UNIT_LENGTH = 100,\r\n    TICK_PER_SEC = 20,\r\n    TICK_PERIOD = 50,\r\n    // Must be an odd number in order to make it bilaterally symmetrical\r\n    VIEWPORT_COLUMNS = 7,\r\n    VIEWPORT_ROWS = 7,\r\n    // Must be an odd number in order to make it bilaterally symmetrical\r\n    RENDER_COLUMNS = 9,\r\n    RENDER_ROWS = 9\r\n}\r\n\r\nexport default GLOBAL;\r\n","import React from 'react';\r\nimport { Stage } from '@inlet/react-pixi';\r\n\r\nconst Component = ({ width, height, children }: {\r\n    width: number;\r\n    height: number;\r\n    children?: React.ReactNode\r\n}) => {\r\n    return (\r\n        <Stage width={width} height={height}>\r\n            {children}\r\n        </Stage>\r\n    );\r\n};\r\n\r\nexport default Component;","import { Coordinate } from \"../types/models\";\r\n\r\nclass Vector {\r\n    static get up() {\r\n        return new Vector(0, -1);\r\n    }\r\n    static get down() {\r\n        return new Vector(0, 1);\r\n    }\r\n    static get left() {\r\n        return new Vector(-1, 0);\r\n    }\r\n    static get right() {\r\n        return new Vector(1, 0);\r\n    }\r\n    static get upRight() {\r\n        return new Vector(1, -1);\r\n    }\r\n    static get downRight() {\r\n        return new Vector(1, 1);\r\n    }\r\n    static get downLeft() {\r\n        return new Vector(-1, 1);\r\n    }\r\n    static get upLeft() {\r\n        return new Vector(-1, -1);\r\n    }\r\n    static isEqual = function (a: Vector, b: Vector): boolean {\r\n        return a.x === b.x && a.y === b.y;\r\n    }\r\n    x: number;\r\n    y: number;\r\n\r\n    constructor(value: Coordinate)\r\n    constructor(x: number, y: number)\r\n    constructor(xOrValue: number | Coordinate, y?: number) {\r\n        if (y === undefined) {\r\n            if (typeof xOrValue !== 'number') {\r\n                this.x = xOrValue.x;\r\n                this.y = xOrValue.y;\r\n            } else {\r\n                throw Error('Unexpected type of argument');\r\n            }\r\n        } else {\r\n            if (typeof xOrValue === 'number' && typeof y === 'number') {\r\n                this.x = xOrValue;\r\n                this.y = y;\r\n            } else {\r\n                throw Error('Unexpected type of argument');\r\n            }\r\n        }\r\n    }\r\n\r\n    public isZero(): boolean {\r\n        return this.x === 0 && this.y === 0;\r\n    }\r\n    \r\n    public get width() {\r\n        return this.x;\r\n    }\r\n\r\n    public get height() {\r\n        return this.y;\r\n    }\r\n\r\n    public get length() {\r\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\r\n    }\r\n\r\n    set(v: Vector): Vector;\r\n    set(x: number, y: number): Vector;\r\n    set(vOrX: Vector | number, y?: number) {\r\n        if (vOrX instanceof Vector) {\r\n            this.x = vOrX.x;\r\n            this.y = vOrX.y;\r\n\r\n            return this;\r\n        } else if (typeof vOrX === 'number' && typeof y === 'number') {\r\n            this.x = vOrX;\r\n            this.y = y;\r\n\r\n            return this;\r\n        } else {\r\n            throw Error('Unexpected argument type');\r\n        }\r\n    }\r\n\r\n    add(v: Vector): Vector;\r\n    add(x: number, y: number): Vector;\r\n    add(vOrX: Vector | number, y?: number) {\r\n        if (vOrX instanceof Vector) {\r\n            this.x += vOrX.x;\r\n            this.y += vOrX.y;\r\n\r\n            return this;\r\n        } else if (typeof vOrX === 'number' && typeof y === 'number') {\r\n            this.x += vOrX;\r\n            this.y += y;\r\n\r\n            return this;\r\n        } else {\r\n            throw Error('Unexpected argument type');\r\n        }\r\n    }\r\n\r\n    \r\n    subtract(v: Vector): Vector;\r\n    subtract(x: number, y: number): Vector;\r\n    subtract(vOrX: Vector | number, y?: number) {\r\n        if (vOrX instanceof Vector) {\r\n            this.x -= vOrX.x;\r\n            this.y -= vOrX.y;\r\n\r\n            return this;\r\n        }\r\n        if (typeof vOrX === \"number\" && typeof y === \"number\") {\r\n            this.x -= vOrX;\r\n            this.y -= y;\r\n\r\n            return this;\r\n        }\r\n        throw Error(\"Unexpected argument type\");\r\n    }\r\n\r\n\r\n    multiply(v: Vector): Vector;\r\n    multiply(x: number): Vector;\r\n    multiply(vOrX: Vector | number) {\r\n\t\tif (vOrX instanceof Vector) {\r\n            this.x *= vOrX.x;\r\n            this.y *= vOrX.y;\r\n\r\n            return this;\r\n        } else if (typeof vOrX === 'number') {\r\n            this.x *= vOrX;\r\n            this.y *= vOrX;\r\n\r\n            return this;\r\n        } else {\r\n            throw Error('Unexpected argument type');\r\n        }\r\n\t}\r\n\r\n    copy(v: Vector) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n\r\n        return this;\r\n    }\r\n\r\n\tclone(): Vector {\r\n\t\treturn new Vector(this.x, this.y);\r\n\t}\r\n\r\n    negate() {\r\n\t\tthis.x = -this.x;\r\n\t\tthis.y = -this.y;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdot(v: Vector) {\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\t}\r\n\r\n\tcross(v: Vector) {\r\n\t\treturn this.x * v.y - this.y * v.x;\r\n\t}\r\n\r\n    setLength(length: number) {\r\n\t\treturn this.normalize().multiply(length);\r\n\t}\r\n    \r\n    public divideScalar(scalar: number) {\r\n        this.x /= scalar;\r\n        this.y /= scalar;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n    public normalize() {\r\n\t\treturn this.divideScalar(this.length || 1);\r\n\t}\r\n\r\n    public round() {\r\n        this.x = Math.round(this.x);\r\n        this.y = Math.round(this.y);\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default Vector;","import { Coordinate } from '../types/models';\r\nimport { isCoordinate } from '../utils/typeCheckHelpers';\r\nimport Vector from './Vector';\r\n\r\nclass Point {\r\n  static isEqual(a: Point, b: Point): boolean {\r\n    return a.x === b.x && a.y === b.y;\r\n  }\r\n  public x: number;\r\n  public y: number;\r\n\r\n  constructor(value: Coordinate);\r\n  constructor(x: number, y: number);\r\n  constructor(xOrValue: Coordinate | number, y?: number) {\r\n    if (isCoordinate(xOrValue)) {\r\n      this.x = xOrValue.x;\r\n      this.y = xOrValue.y;\r\n    } else {\r\n      this.x = xOrValue;\r\n      this.y = y as number;\r\n    }\r\n  }\r\n\r\n  public get length(): number {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n\r\n  public round(threshold: number): Point {\r\n    return new Point(\r\n      Math.round(this.x / threshold) * threshold,\r\n      Math.round(this.y / threshold) * threshold\r\n    );\r\n  }\r\n\r\n  public floor(threshold: number): Point {\r\n    return new Point(\r\n      Math.floor(this.x / threshold) * threshold,\r\n      Math.floor(this.y / threshold) * threshold\r\n    );\r\n  }\r\n\r\n  public ceil(threshold: number): Point {\r\n    return new Point(\r\n      Math.ceil(this.x / threshold) * threshold,\r\n      Math.ceil(this.y / threshold) * threshold\r\n    );\r\n  }\r\n\r\n  set(v: Point): Point;\r\n  set(x: number, y: number): Point;\r\n  set(vOrX: Point | number, y?: number): Point {\r\n    if (vOrX instanceof Point) {\r\n      this.x = vOrX.x;\r\n      this.y = vOrX.y;\r\n\r\n      return this;\r\n    }\r\n\r\n    y = y as number;\r\n\r\n    this.x = vOrX;\r\n    this.y = y;\r\n\r\n    return this;\r\n  }\r\n\r\n  add(v: Vector | Point): Point;\r\n  add(x: number, y: number): Point;\r\n  add(vOrX: Vector | Point | number, y?: number): Point {\r\n    if (vOrX instanceof Vector || vOrX instanceof Point) {\r\n      this.x += vOrX.x;\r\n      this.y += vOrX.y;\r\n\r\n      return this;\r\n    }\r\n\r\n    y = y as number;\r\n\r\n    this.x += vOrX;\r\n    this.y += y;\r\n\r\n    return this;\r\n  }\r\n\r\n  subtract(v: Vector | Point): Point;\r\n  subtract(x: number, y: number): Point;\r\n  subtract(vOrX: Vector | Point | number, y?: number): Point {\r\n    if (vOrX instanceof Vector || vOrX instanceof Point) {\r\n      this.x -= vOrX.x;\r\n      this.y -= vOrX.y;\r\n\r\n      return this;\r\n    }\r\n\r\n    y = y as number;\r\n\r\n    this.x -= vOrX;\r\n    this.y -= y;\r\n\r\n    return this;\r\n  }\r\n\r\n  multiply(v: Vector): Point;\r\n  multiply(x: number): Point;\r\n  multiply(vOrX: Vector | number): Point {\r\n    if (vOrX instanceof Vector) {\r\n      this.x *= vOrX.x;\r\n      this.y *= vOrX.y;\r\n\r\n      return this;\r\n    }\r\n\r\n    this.x *= vOrX;\r\n    this.y *= vOrX;\r\n\r\n    return this;\r\n  }\r\n\r\n  copy(v: Point): Point {\r\n    this.x = v.x;\r\n    this.y = v.y;\r\n\r\n    return this;\r\n  }\r\n\r\n  public clone(): Point {\r\n    return new Point(this.x, this.y);\r\n  }\r\n\r\n  public isEqual(pos: Point): boolean {\r\n    return this.x === pos.x && this.y === pos.y;\r\n  }\r\n\r\n  public isWithin(posTuple: [Point, Point], isIncluded: boolean): boolean;\r\n  public isWithin(start: Point, end: Point, isIncluded: boolean): boolean;\r\n  public isWithin(\r\n    first: [Point, Point] | Point,\r\n    second: boolean | Point,\r\n    third?: boolean\r\n  ): boolean {\r\n    if (Array.isArray(first)) {\r\n      second = second as boolean;\r\n\r\n      if (second) {\r\n        return (\r\n          this.x >= first[0].x &&\r\n          this.x <= first[1].x &&\r\n          this.y >= first[0].y &&\r\n          this.y <= first[1].y\r\n        );\r\n      }\r\n\r\n      return (\r\n        this.x > first[0].x &&\r\n        this.x < first[1].x &&\r\n        this.y > first[0].y &&\r\n        this.y < first[1].y\r\n      );\r\n    }\r\n\r\n    second = second as Point;\r\n\r\n    if (third) {\r\n      return (\r\n        this.x >= first.x &&\r\n        this.x <= second.x &&\r\n        this.y >= first.y &&\r\n        this.y <= second.y\r\n      );\r\n    }\r\n\r\n    return (\r\n      this.x > first.x &&\r\n      this.x < second.x &&\r\n      this.y > first.y &&\r\n      this.y < second.y\r\n    );\r\n  }\r\n}\r\n\r\nexport default Point;\r\n","import { Coordinate } from '../types/models';\r\n\r\nexport const isCoordinate = (obj: any): obj is Coordinate => {\r\n  return obj && !isNaN(Number(obj.x)) && !isNaN(Number(obj.y));\r\n};\r\n","import Point from \"./Point\";\r\n\r\nclass Segment {\r\n    start: Point;\r\n    end: Point;\r\n\r\n    constructor(value: [Point, Point])\r\n    constructor(start: Point, end: Point)\r\n    constructor(startOrValue: Point | [Point, Point], end?: Point) {\r\n        if (end) {\r\n            if (startOrValue instanceof Point && end instanceof Point) {\r\n                this.start = startOrValue;\r\n                this.end = end;\r\n            } else {\r\n                throw Error('Unexpected type of argument');\r\n            }\r\n        } else {\r\n            if (Array.isArray(startOrValue) && startOrValue.length === 2) {\r\n                this.start = startOrValue[0];\r\n                this.end = startOrValue[1];\r\n            } else {\r\n                throw Error('Unexpected type of argument');\r\n            }\r\n        }\r\n    }\r\n\r\n    clone() {\r\n      return new Segment(\r\n        new Point(this.start.x, this.start.y),\r\n        new Point(this.end.x, this.end.y)\r\n      );\r\n    }\r\n  \r\n    copy(segment: Segment) {\r\n      this.start.copy(segment.start);\r\n      this.end.copy(segment.end);\r\n  \r\n      return this;\r\n    }\r\n}\r\n\r\nexport default Segment;","const EVENT = {\r\n  ELEMENT: {\r\n    CREATE: 'ELEMENT_CREATE',\r\n    DESTROY: 'ELEMENT_DESTROY',\r\n    UPDATE: 'ELEMENT_UPDATE',\r\n  },\r\n  WORLD: {\r\n    DAYLIGHT_CYCLE: 'WORLD_DAYLIGHT_CYCLE',\r\n    PLAYERS: {\r\n      JOIN: 'WORLD_PLAYERS_JOIN',\r\n      MOVE: 'WORLD_PLAYERS_MOVE',\r\n    },\r\n  },\r\n  SURFACE: {\r\n    DAYLIGHT_CYCLE: 'SURFACE_DAYLIGHT_CYCLE',\r\n    MOB: {\r\n      MOVE: 'SURFACE_MOB_MOVE',\r\n    },\r\n  },\r\n  PLAYER: {\r\n    MOVE: 'PLAYER_MOVE',\r\n  },\r\n  MOB: {\r\n    MOVE: 'MOB_MOVE',\r\n  },\r\n};\r\n\r\nexport default EVENT;\r\n","import Point from \"../math/Point\";\r\nimport GLOBAL from \"../constants/global\";\r\nimport { Coordinate } from \"../types/models\";\r\nimport Vector from \"../math/Vector\";\r\nimport Element from \"./Element\";\r\n\r\nabstract class Block extends Element {\r\n    id: string;\r\n    layer: number;\r\n    pos: Point;\r\n    aspect: Vector;\r\n    isConcrete: boolean;\r\n\r\n    constructor({\r\n        id, layer, pos, aspect, isConcrete\r\n    }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n    }) {\r\n        super();\r\n        this.id = id;\r\n        this.layer = layer;\r\n        this.pos = pos instanceof Point ? pos : new Point(pos);\r\n        this.aspect = new Vector(aspect);\r\n        this.isConcrete = isConcrete;\r\n    }\r\n\r\n    public get width(): number {\r\n        return this.aspect.width;\r\n    }\r\n\r\n    public get height(): number {\r\n        return this.aspect.height;\r\n    }\r\n\r\n    public get borderPos(): [Point, Point] {\r\n        return [\r\n            this.pos.clone(),\r\n            this.pos.clone().add(new Vector(this.width - 1, this.height - 1))\r\n        ];\r\n    }\r\n\r\n    public get adjacentPos(): Point[] {\r\n        return [\r\n            this.pos.clone()\r\n                .add(new Vector(this.width / 2, 0))\r\n                .add(Vector.up.multiply(GLOBAL.UNIT_LENGTH - 1)),\r\n            this.pos.clone()\r\n                .add(new Vector(this.width, this.height / 2))\r\n                .add(Vector.right.multiply(GLOBAL.UNIT_LENGTH - 1)),\r\n            this.pos.clone()\r\n                .add(new Vector(this.width / 2, this.height))\r\n                .add(Vector.down.multiply(GLOBAL.UNIT_LENGTH - 1)),\r\n            this.pos.clone()\r\n                .add(new Vector(0, this.height / 2))\r\n                .add(Vector.left.multiply(GLOBAL.UNIT_LENGTH - 1))\r\n        ];\r\n    }\r\n}\r\n\r\nexport default Block;","import { EventEmitter } from 'events';\r\nimport { setInterval } from 'timers';\r\nimport { video } from '../config/video';\r\nimport EVENT from '../constants/event';\r\n\r\nabstract class Element extends EventEmitter {\r\n  protected lastTime: number;\r\n\r\n  constructor() {\r\n    super();\r\n    this.lastTime = 0;\r\n    this.timer = setInterval(this.update.bind(this), 1000 / video.fps);\r\n  }\r\n\r\n  public set timer(timer: NodeJS.Timeout) {}\r\n\r\n  public onDestroy(listener: (...arg: any[]) => void) {\r\n    this.on(EVENT.ELEMENT.DESTROY, listener);\r\n  }\r\n\r\n  public destroy() {\r\n    clearInterval(this.timer);\r\n    this.emit(EVENT.ELEMENT.DESTROY);\r\n  }\r\n\r\n  public onCreate(listener: (...arg: any[]) => void) {\r\n    this.on(EVENT.ELEMENT.CREATE, listener);\r\n  }\r\n\r\n  public onUpdate(listener: (...arg: any[]) => void) {\r\n    this.on(EVENT.ELEMENT.UPDATE, listener);\r\n  }\r\n\r\n  protected create() {\r\n    this.emit(EVENT.ELEMENT.CREATE);\r\n  }\r\n\r\n  protected update() {\r\n    if (this.lastTime === 0) {\r\n      this.create();\r\n    } else {\r\n      this.emit(EVENT.ELEMENT.UPDATE);\r\n    }\r\n    this.lastTime += 1;\r\n  }\r\n}\r\n\r\nexport default Element;\r\n","import Point from \"../../../math/Point\";\r\nimport { StructureInterface, Coordinate } from \"../../../types/models\";\r\nimport Segment from \"../../../math/Segment\";\r\nimport Block from \"../../../core/Block\";\r\n\r\nabstract class Structure extends Block implements StructureInterface {\r\n    type: number;\r\n    pattern: number;\r\n    frames: Segment[];\r\n\r\n    constructor({\r\n        id,\r\n        layer,\r\n        pos,\r\n        aspect,\r\n        type,\r\n        pattern,\r\n        isConcrete,\r\n        frames\r\n    }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Point | Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        type: number;\r\n        pattern: number;\r\n        frames: { start: Coordinate; end: Coordinate }[];\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete });\r\n        this.type = type;\r\n        this.pattern = pattern;\r\n        this.isConcrete = isConcrete;\r\n        this.frames = frames.map(frame => new Segment(new Point(frame.start), new Point(frame.end)))\r\n    }\r\n}\r\n\r\nexport default Structure;","import Structure from './Structure';\r\nimport { DoorInterface, Coordinate } from '../../../types/models';\r\nimport { Toward } from '../../../types';\r\n\r\nclass Door extends Structure implements DoorInterface {\r\n    static TYPE = {\r\n        WOOD: 0,\r\n        STONE: 1\r\n    }\r\n    static PATTERNS = {\r\n        NORTH_SOUTH: 0,\r\n        EAST_WEST: 1\r\n    }\r\n\r\n    toward: Toward;\r\n    isOpen: boolean;\r\n\r\n    constructor({\r\n        id,\r\n        layer,\r\n        pos,\r\n        aspect,\r\n        isConcrete,\r\n        type,\r\n        pattern,\r\n        frames,\r\n        toward,\r\n        isOpen,\r\n    }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        type: number;\r\n        pattern: number;\r\n        toward: Toward;\r\n        isOpen: boolean;\r\n        frames: {\r\n            start: Coordinate;\r\n            end: Coordinate;\r\n        }[]\r\n    }) {\r\n        super({\r\n            id,\r\n            layer,\r\n            pos,\r\n            aspect,\r\n            isConcrete,\r\n            type,\r\n            pattern,\r\n            frames\r\n        });\r\n        this.toward = toward;\r\n        this.isOpen = isOpen;\r\n    }\r\n\r\n}\r\n\r\nexport default Door;","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport DoorClass from \"../models/blocks/structure/Door\";\r\nimport doorClosePng from '../assets/Door0.png'; \r\nimport doorOpenPng from '../assets/Door1.png'; \r\n\r\nconst Door = ({ type, pattern, isOpen, size, x, y }: {\r\n    type: number;\r\n    pattern: number;\r\n    isOpen: boolean;\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const benchmark = -type * 32;\r\n    const tilePosition = { x: 0, y: 0 };\r\n    \r\n    switch (pattern) {\r\n        case DoorClass.PATTERNS.NORTH_SOUTH:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark;\r\n            break;\r\n        case DoorClass.PATTERNS.EAST_WEST:\r\n            tilePosition.x = -32;\r\n            tilePosition.y = benchmark;\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    \r\n    return (\r\n        <TilingSprite\r\n            key={`Door(${x},${y})`}\r\n            image={isOpen ? doorOpenPng : doorClosePng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Door);","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import Structure from './Structure';\r\nimport { WallInterface, Coordinate } from '../../../types/models';\r\n\r\nclass Wall extends Structure implements WallInterface {\r\n    static PATTERNS = {\r\n        INDIVIDUAL: 0,\r\n        SURFACE: 1,\r\n        INTERSECTION: 2,\r\n        NORTH_SOUTH: 3,\r\n        EAST_WEST: 4,\r\n        T: 5,\r\n        T_90_DEG: 6,\r\n        T_180_DEG: 7,\r\n        T_270_DEG: 8,\r\n        TOP_LEFT: 9,\r\n        TOP_RIGHT: 10,\r\n        BOTTOM_LEFT: 11,\r\n        BOTTOM_RIGHT: 12\r\n    }\r\n\r\n    constructor({ id, layer, pos, aspect, isConcrete, type, pattern, frames }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        type: number;\r\n        pattern: number;\r\n        frames: {\r\n            start: Coordinate;\r\n            end: Coordinate;\r\n        }[]\r\n    }) {\r\n        super({\r\n            id,\r\n            layer,\r\n            pos,\r\n            aspect,\r\n            isConcrete,\r\n            type,\r\n            pattern,\r\n            frames\r\n        });\r\n    }\r\n}\r\n\r\nexport default Wall;","export default __webpack_public_path__ + \"static/media/Wall.383d44ac.png\";","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport WallClass from \"../models/blocks/structure/Wall\";\r\nimport wallPng from \"../assets/Wall.png\";\r\n\r\nconst Wall = ({ type, pattern, size, x, y }: {\r\n    type: number;\r\n    pattern: number\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const benchmark = -type * 96;\r\n    const tilePosition = { x: 0, y: 0 };\r\n\r\n    switch (pattern) {\r\n        case WallClass.PATTERNS.TOP_LEFT:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case WallClass.PATTERNS.TOP_RIGHT:\r\n            tilePosition.x = -64;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case WallClass.PATTERNS.BOTTOM_LEFT:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case WallClass.PATTERNS.BOTTOM_RIGHT:\r\n            tilePosition.x = -64;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case WallClass.PATTERNS.NORTH_SOUTH:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case WallClass.PATTERNS.EAST_WEST:\r\n            tilePosition.x = -32;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case WallClass.PATTERNS.INDIVIDUAL:\r\n            tilePosition.x = -32;\r\n            tilePosition.y = benchmark -128;\r\n            break;\r\n        case WallClass.PATTERNS.INTERSECTION:\r\n            tilePosition.x = -128;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case WallClass.PATTERNS.T:\r\n            tilePosition.x = -128;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case WallClass.PATTERNS.T_90_DEG:\r\n            tilePosition.x = -160;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case WallClass.PATTERNS.T_180_DEG:\r\n            tilePosition.x = -128;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case WallClass.PATTERNS.T_270_DEG:\r\n            tilePosition.x = -96;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case WallClass.PATTERNS.SURFACE:\r\n            tilePosition.x = -96;\r\n            tilePosition.y = benchmark -96;\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return (\r\n        <TilingSprite\r\n            key={`Wall(${x},${y})`}\r\n            image={wallPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Wall);","export default __webpack_public_path__ + \"static/media/Player0.1432bdef.png\";","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport playerPng from '../assets/Player0.png';\r\n\r\nconst Component = ({ id, size, x, y }: {\r\n    id: string;\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const tilePosition = { x: 0, y: 0 };\r\n\r\n    return (\r\n        <TilingSprite\r\n            key={id}\r\n            image={playerPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Component);","import { Coordinate } from \"../../types/models\";\r\nimport Block from \"../../core/Block\";\r\n\r\nclass Floor extends Block{\r\n    static TYPES = {\r\n        PLAIN: 0,\r\n        TILE: 1\r\n    };\r\n    static PATTERNS = {\r\n        INDIVIDUAL: 0,\r\n        INTERSECTION: 1,\r\n        HORIZONTAL: {\r\n            LEFT: 2,\r\n            MIDDLE: 3,\r\n            RIGHT: 4\r\n        },\r\n        VERTICAL: {\r\n            TOP: 5,\r\n            MIDDLE: 6,\r\n            BOTTOM: 7\r\n        },\r\n        GRID: {\r\n            TOP_LEFT: 8,\r\n            TOP_CENTER: 9,\r\n            TOP_RIGHT: 10,\r\n            MIDDLE_LEFT: 11,\r\n            MIDDLE_CENTER: 12,\r\n            MIDDLE_RIGHT: 13,\r\n            BOTTOM_LEFT: 14,\r\n            BOTTOM_CENTER: 15,\r\n            BOTTOM_RIGHT: 16\r\n        }\r\n    };\r\n\r\n    type: number;\r\n    pattern: number;\r\n    \r\n    constructor({ id, layer, pos, aspect, isConcrete, type, pattern }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        type: number;\r\n        pattern: number;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete });\r\n        this.type = type;\r\n        this.pattern = pattern;\r\n    }\r\n}\r\n\r\nexport default Floor;","export default __webpack_public_path__ + \"static/media/Floor.9a12fe77.png\";","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport FloorClass from \"../models/blocks/Floor\";\r\nimport floorPng from \"../assets/Floor.png\";\r\n\r\nconst Floor = ({ type, pattern, size, x, y }: {\r\n    type: number;\r\n    pattern: number;\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const benchmark = -type * 96;\r\n    const tilePosition = { x: 0, y: 0 };\r\n\r\n    switch (pattern) {\r\n        case FloorClass.PATTERNS.GRID.TOP_LEFT:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.TOP_CENTER:\r\n            tilePosition.x = -32;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.TOP_RIGHT:\r\n            tilePosition.x = -64;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.MIDDLE_LEFT:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.MIDDLE_CENTER:\r\n            tilePosition.x = -32;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.MIDDLE_RIGHT:\r\n            tilePosition.x = -64;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.BOTTOM_LEFT:\r\n            tilePosition.x = 0;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.BOTTOM_CENTER:\r\n            tilePosition.x = -32;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case FloorClass.PATTERNS.GRID.BOTTOM_RIGHT:\r\n            tilePosition.x = -64;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case FloorClass.PATTERNS.VERTICAL.TOP:\r\n            tilePosition.x = -96;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case FloorClass.PATTERNS.VERTICAL.MIDDLE:\r\n            tilePosition.x = -96;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.VERTICAL.BOTTOM:\r\n            tilePosition.x = -96;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        case FloorClass.PATTERNS.HORIZONTAL.LEFT:\r\n            tilePosition.x = -128;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.HORIZONTAL.MIDDLE:\r\n            tilePosition.x = -160;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.HORIZONTAL.RIGHT:\r\n            tilePosition.x = -192;\r\n            tilePosition.y = benchmark - 128;\r\n            break;\r\n        case FloorClass.PATTERNS.INDIVIDUAL:\r\n            tilePosition.x = -160;\r\n            tilePosition.y = benchmark - 96;\r\n            break;\r\n        case FloorClass.PATTERNS.INTERSECTION:\r\n            tilePosition.x = -160;\r\n            tilePosition.y = benchmark - 160;\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return (\r\n        <TilingSprite\r\n            key={`Floor(${x},${y})`}\r\n            image={floorPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Floor);","import React from 'react';\r\nimport { Graphics } from '@inlet/react-pixi';\r\n\r\nconst Component = (data: any, size: number, x: number, y: number) => {\r\n    return <Graphics key={`(${x},${y})`} draw={g => {\r\n        g.clear();\r\n        g.beginFill(0, 0);\r\n        g.drawRect(x, y, size, size);\r\n        g.endFill();\r\n    }} />;\r\n}\r\n\r\nexport default Component;","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport torchPng from '../assets/Torch.png'; \r\n\r\nconst Torch = ({ size, x, y }: {\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const tilePosition = { x: 0, y: 0 };\r\n\r\n    return (\r\n        <TilingSprite\r\n            key={`Torch(${x},${y})`}\r\n            image={torchPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Torch);","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAW5QTFRFAAAA/+VQ/+dM/bY2/bY4+7E0/uZG/7w//LY6/+hK/+lI/r88/r07/7w6/fe9+/W39/X29fX1+/a89vT19/f3tIxYtItXsIJRuodSs4hVn3lMnnhLeVU7elc7e1k+n3lKnHdKe1g8fVo+fVk/nnhJfFk9fls/gFxCr4xSrYpQakcxa0g0rYlPr4xUbEkzbEova0gysI5RsY5UhWBFgl1Cgl9Dr4tPs4xTg15Dg2BEso5UsI1TgFtAgF1BgV1DxKtobUo0bUo2wqlmxq5obEw1bEoxxq1qxa5rbEk1a0s0tpNdb0w4bks3cFA7s5NasZFYb1A7clM/uJpouJhnfGBLel9MfmNSjHRSj3JUfmNQgGNRgWZVjHNVj3RZgW5nhGlYjXRWgGtWf2RTg2ZWhGhavaFyvKBxgWVZg2hXhWhau59wgmhZgmZYhWlbkXhaj3VahGpbkHdZjXNYg2dZhmpekHZdj3Vcg2lcg2dbhGpdK/5JYgAAAHp0Uk5TAP////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9bcsYGAAAAzklEQVR4nK3KV1uBAQAGUHsTJTszCdmy+cisFGWPshXZRfn3/sF70eNcHxLpuMgUKo2OAoPCpLJQYHO4PD4KghOhSATDqfBMjMK5RCqTo6BQqi7UKGi0Or0BBe2l8cqEwrXZYrGicGOzO5wouNwe7y0KPr83EEQhFI5EYygQhCOeQOEumUrbUchkc/dxFNwPj/knFJ4LxRcYXkvlShWFWr3RbKHQfntvdVDo9vqDIQqj8cfnBIbp12yOwmI5nK9QWG9m3z8obHe/f3sU/uMAFkUg4Ln5jOkAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,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\"","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport QuadrupedPng from '../assets/Quadruped0.png';\r\n\r\nconst Component = ({ id, size, x, y }: {\r\n    id: string;\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const tilePosition = { x: -32, y: -32 };\r\n\r\n    return (\r\n        <TilingSprite\r\n            key={id}\r\n            image={QuadrupedPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Component);","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport QuadrupedPng from \"../assets/Quadruped0.png\";\r\n\r\nconst Component = ({ id, size, x, y }: {\r\n  id: string;\r\n  size: number;\r\n  x: number;\r\n  y: number;\r\n}) => {\r\n  const tilePosition = { x: -32, y: -32 * 2 };\r\n\r\n  return (\r\n    <TilingSprite\r\n      key={id}\r\n      image={QuadrupedPng}\r\n      tilePosition={tilePosition}\r\n      width={size}\r\n      height={size}\r\n      x={x}\r\n      y={y}\r\n    />\r\n  );\r\n};\r\n\r\nexport default memo(Component);\r\n","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport QuadrupedPng from '../assets/Quadruped0.png';\r\n\r\nconst Component = ({ id, size, x, y }: {\r\n    id: string;\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const tilePosition = { x: -32, y: 0 };\r\n\r\n    return (\r\n        <TilingSprite\r\n            key={id}\r\n            image={QuadrupedPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Component);","import React, { memo } from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport QuadrupedPng from '../assets/Quadruped0.png';\r\n\r\nconst Component = ({ id, size, x, y }: {\r\n    id: string;\r\n    size: number;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const tilePosition = { x: -32, y: -96 };\r\n\r\n    return (\r\n        <TilingSprite\r\n            key={id}\r\n            image={QuadrupedPng}\r\n            tilePosition={tilePosition}\r\n            width={size}\r\n            height={size}\r\n            x={x}\r\n            y={y}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Component);","import Door from \"./Door\";\r\nimport Wall from \"./Wall\";\r\nimport Player from \"./Player\";\r\nimport Floor from \"./Floor\";\r\nimport Void from \"./Void\";\r\nimport Torch from \"./Torch\";\r\nimport Cow from \"./Cow\";\r\nimport Goat from \"./Goat\";\r\nimport Pig from \"./Pig\";\r\nimport Sheep from \"./Sheep\";\r\n\r\nconst constructors: {\r\n    [name: string]: (data: any, size: number, x: number, y: number) => any;\r\n} = {\r\n    'Floor': Floor,\r\n    'Wall': Wall,\r\n    'Door': Door,\r\n    'Torch': Torch,\r\n    'Player': Player,\r\n    'Cow': Cow,\r\n    'Goat': Goat,\r\n    'Sheep': Sheep,\r\n    'Pig': Pig,\r\n    'Object': Void\r\n};\r\n\r\nexport default constructors;\r\n","import Point from \"../math/Point\";\r\nimport Sprite from '../components';\r\nimport { video } from \"../config/video\";\r\n\r\nclass Image {\r\n    target: any;\r\n    position: Point;\r\n    layer: number;\r\n    \r\n    constructor(target: any, position: Point, layer: number) {\r\n        this.target = target;\r\n        this.position = position;\r\n        this.layer = layer;\r\n    }\r\n\r\n    public get toSprite() {\r\n        return Sprite[this.target.constructor.name](this.target, video.gridSize, this.position.x, this.position.y);\r\n    }\r\n}\r\n\r\nexport default Image;","import { video } from '../config/video';\r\nimport GLOBAL from '../constants/global';\r\nimport Image from '../models/Image';\r\nimport Point from '../math/Point';\r\nimport Segment from '../math/Segment';\r\nimport Vector from '../math/Vector';\r\nimport { Layer } from '../types';\r\nimport { alignPoint } from '../utils';\r\n\r\nclass Camera {\r\n  layers: { [layerName: string]: Layer };\r\n  fov: number;\r\n  aspect: number;\r\n  near: number;\r\n  far: number;\r\n  position: Point;\r\n\r\n  constructor(\r\n    fov: number = video.gridSize * GLOBAL.RENDER_ROWS,\r\n    aspect: number = video.aspect,\r\n    near: number = video.gridSize,\r\n    far: number = GLOBAL.UNIT_LENGTH,\r\n    position: Point = new Point(0, 0)\r\n  ) {\r\n    this.layers = {};\r\n    this.fov = fov;\r\n    this.aspect = aspect;\r\n    this.near = near;\r\n    this.far = far;\r\n    this.position = position;\r\n  }\r\n\r\n  private get mag(): number {\r\n    return this.near / this.far;\r\n  }\r\n  /**\r\n   * Returns an offset to camera position with center grid position.\r\n   */\r\n  public get offset(): Point {\r\n    const { x, y } = this.position.clone().multiply(this.mag);\r\n    /**\r\n     * Prevent decimal carring from abnormal scene displacement.\r\n     */\r\n    const cameraPosProjection = new Point(\r\n      this.position.x % GLOBAL.UNIT_LENGTH === GLOBAL.UNIT_LENGTH / 2 - 1\r\n        ? Math.floor(x)\r\n        : Math.round(x),\r\n      this.position.y % GLOBAL.UNIT_LENGTH === GLOBAL.UNIT_LENGTH / 2 - 1\r\n        ? Math.floor(y)\r\n        : Math.round(y)\r\n    );\r\n\r\n    return new Point(\r\n      (-(GLOBAL.RENDER_COLUMNS - GLOBAL.VIEWPORT_COLUMNS) / 2) *\r\n        video.gridSize -\r\n        (cameraPosProjection.x % video.gridSize < video.gridSize / 2\r\n          ? cameraPosProjection.x % video.gridSize\r\n          : (cameraPosProjection.x % video.gridSize) - video.gridSize),\r\n      (-(GLOBAL.RENDER_ROWS - GLOBAL.VIEWPORT_ROWS) / 2) * video.gridSize -\r\n        (cameraPosProjection.y % video.gridSize < video.gridSize / 2\r\n          ? cameraPosProjection.y % video.gridSize\r\n          : (cameraPosProjection.y % video.gridSize) - video.gridSize)\r\n    );\r\n  }\r\n\r\n  private get farPlaneBound(): [Point, Point] {\r\n    const start = new Point(0, 0);\r\n    const end = new Point(0, 0);\r\n    const halfHeight =\r\n      (((this.fov / video.gridSize - 1) / 2) * video.gridSize) / this.mag;\r\n    const halfWidth =\r\n      ((((this.fov * this.aspect) / video.gridSize - 1) / 2) * video.gridSize) /\r\n      this.mag;\r\n    const center = alignPoint(this.position);\r\n\r\n    start.set(center.clone().subtract(new Vector(halfWidth, halfHeight)));\r\n    end.set(\r\n      center\r\n        .clone()\r\n        .add(new Vector(GLOBAL.UNIT_LENGTH, GLOBAL.UNIT_LENGTH))\r\n        .add(new Vector(halfWidth, halfHeight))\r\n    );\r\n\r\n    return [start, end];\r\n  }\r\n\r\n  private get nearPlaneBound(): [Point, Point] {\r\n    return this.farPlaneBound.map((point) => point.multiply(this.mag)) as [\r\n      Point,\r\n      Point\r\n    ];\r\n  }\r\n  /**\r\n   * Returns a point from world coordinate system to viewport coordinate system.\r\n   */\r\n  public transform<Point>(pos: Point): Point;\r\n  public transform<Segment>(seg: Segment): Segment;\r\n  public transform(val: Point | Segment) {\r\n    if (val instanceof Point) {\r\n      return val\r\n        .clone()\r\n        .subtract(this.farPlaneBound[0])\r\n        .multiply(this.mag)\r\n        .round(1);\r\n    } else if (val instanceof Segment) {\r\n      return new Segment(\r\n        val.start.clone().subtract(this.farPlaneBound[0]).multiply(this.mag),\r\n        val.end.clone().subtract(this.farPlaneBound[0]).multiply(this.mag)\r\n      );\r\n    }\r\n  }\r\n\r\n  public capture(sources: { [type: string]: any[] }) {\r\n    const farPlaneBound = this.farPlaneBound;\r\n    const layers: { [type: string]: any } = {};\r\n    let i = 0;\r\n\r\n    for (const key in sources) {\r\n      if (Object.prototype.hasOwnProperty.call(sources, key)) {\r\n        const elements = sources[key];\r\n        \r\n        layers[key] = {\r\n          visibilty: true,\r\n          images: elements\r\n            .filter(element => element.pos.isWithin(farPlaneBound, true))\r\n            .map(element => new Image(element, this.transform(element.pos), element.layer))\r\n            .sort((a, b) => a.layer - b.layer),\r\n          order: i++\r\n        };\r\n      }\r\n    }\r\n\r\n    this.layers = layers;\r\n    return layers;\r\n  }\r\n}\r\n\r\nexport default Camera;\r\n","import Point from \"../math/Point\";\r\nimport GLOBAL from \"../constants/global\";\r\n\r\nexport function alignPoint(pos: Point): Point {\r\n    return new Point({\r\n        x: Math.round((pos.x) / GLOBAL.UNIT_LENGTH) * GLOBAL.UNIT_LENGTH,\r\n        y: Math.round((pos.y) / GLOBAL.UNIT_LENGTH) * GLOBAL.UNIT_LENGTH\r\n    });\r\n}","import Point from \"./Point\";\r\nimport Vector from \"./Vector\";\r\n\r\nclass Ray {\r\n  origin: Point;\r\n  direction: Vector;\r\n\r\n  constructor(origin = new Point(0, 0), direction = new Vector(1, 0)) {\r\n    this.origin = origin;\r\n    this.direction = direction;\r\n  }\r\n\r\n  set(origin: Point, direction: Vector) {\r\n    this.origin.copy(origin);\r\n    this.direction.copy(direction);\r\n\r\n    return this;\r\n  }\r\n\r\n  at(t: number, target: Vector = new Vector(0, 0)) {\r\n    return target\r\n      .copy(this.direction)\r\n      .multiply(t)\r\n      .add(this.origin.x, this.origin.y);\r\n  }\r\n\r\n  clone() {\r\n    return new Ray(\r\n      new Point(this.origin.x, this.origin.y),\r\n      new Vector(this.direction.x, this.direction.y)\r\n    );\r\n  }\r\n\r\n  copy(ray: Ray) {\r\n    this.origin.copy(ray.origin);\r\n    this.direction.copy(ray.direction);\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Ray;","import Point from \"../math/Point\";\r\nimport Ray from \"../math/Ray\";\r\nimport Segment from \"../math/Segment\";\r\nimport Vector from \"../math/Vector\";\r\n\r\nclass Raycaster {\r\n    ray: Ray;\r\n    near: number;\r\n    far: number;\r\n    \r\n    constructor(\r\n        origin = new Point(0, 0),\r\n        direction = new Vector(1, 0),\r\n        far = Infinity,\r\n        near = 0\r\n    ) {\r\n        this.ray = new Ray(origin, direction);\r\n        this.far = far;\r\n        this.near = near;\r\n    }\r\n\r\n    set(origin: Point, direction: Vector) {\r\n        this.ray.set(origin, direction);\r\n    }\r\n\r\n    intersect(seg: Segment) {\r\n        const rpx = this.ray.origin.x;\r\n        const rpy = this.ray.origin.y;\r\n        const rdx = this.ray.direction.x;\r\n        const rdy = this.ray.direction.y;\r\n\r\n        const spx = seg.start.x;\r\n        const spy = seg.start.y;\r\n        const sdx = seg.end.x - seg.start.x;\r\n        const sdy = seg.end.y - seg.start.y;\r\n\r\n        if (rdx * sdy === rdy * sdx) {\r\n            return null;\r\n        }\r\n\r\n        const T2 = (rdx * (spy - rpy) + rdy * (rpx - spx)) / (sdx * rdy - sdy * rdx);\r\n        const T1 = (sdx * (rpy - spy) + sdy * (spx - rpx)) / (rdx * sdy - rdy * sdx);\r\n\r\n        if (T1 < 0) return null;\r\n        if (T2 < 0 || T2 > 1) return null;\r\n\r\n        const distance = new Vector(rpx + rdx * T1 - this.ray.origin.x, rpy + rdy * T1 - this.ray.origin.y).length;\r\n\r\n        if (distance > this.near && distance < this.far) {\r\n            return {\r\n                distance,\r\n                point: new Point(rpx + rdx * T1, rpy + rdy * T1),\r\n                param: T1,\r\n                angle: Math.atan(T1)\r\n            };\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Raycaster;","import { video } from \"../config/video\";\r\nimport Raycaster from \"../core/Raycaster\";\r\nimport Point from \"../math/Point\";\r\nimport Segment from \"../math/Segment\";\r\nimport Vector from \"../math/Vector\";\r\nimport { Layer } from \"../types\";\r\nimport Camera from \"./Camera\";\r\n\r\nclass Sight {\r\n    observer: Point;\r\n    obstructors: Segment[];\r\n    bound: Vector;\r\n    offset: number;\r\n\r\n    constructor(\r\n        camera: Camera,\r\n        observer: Point,\r\n        bound: Vector,\r\n        structuresLayer: Layer,\r\n        offset: number = 0.00001\r\n    ) {\r\n        this.observer = camera.transform(observer).clone().add(new Vector(video.gridSize / 2, video.gridSize / 2));\r\n        this.obstructors = structuresLayer.images\r\n            .filter(image => image.target.frames)\r\n            .map(image => image.target.frames).flat()\r\n            .map(seg => camera.transform<Segment>(seg))\r\n            .concat([\r\n                new Segment(new Point(0, 0), new Point(bound.x, 0)),\r\n                new Segment(new Point(bound.x, 0), new Point(bound.x, bound.y)),\r\n                new Segment(new Point(bound.x, bound.y), new Point(0, bound.y)),\r\n                new Segment(new Point(0, bound.y), new Point(0, 0))\r\n            ]);\r\n        this.bound = bound;\r\n        this.offset = offset;\r\n    }\r\n\r\n    public get area() {\r\n        const points = this.obstructors\r\n            .map(barrier => [\r\n                new Point(barrier.start.x, barrier.start.y),\r\n                new Point(barrier.end.x, barrier.end.y)\r\n            ])\r\n            .flat();\r\n\r\n        const uniquePoints = points.reduce((result, point) => {\r\n            if (result.set.has(`${point.x},${point.y}`)) {\r\n                return result;\r\n            } else {\r\n                result.set.add(`${point.x},${point.y}`)\r\n                result.filtered.push(point);\r\n                return result;\r\n            }\r\n        }, {\r\n            filtered: [] as Point[],\r\n            set: new Set<string>()\r\n        }).filtered;\r\n\r\n        const uniqueAngles = uniquePoints.map(uniquePoint => {\r\n            const angle = Math.atan2(\r\n                uniquePoint.y - this.observer.y,\r\n                uniquePoint.x - this.observer.x\r\n            );\r\n            return [angle - this.offset, angle, angle + this.offset];\r\n        }).flat();\r\n        \r\n        const intersects = uniqueAngles.reduce((intersects, angle) => {\r\n            const dx = Math.cos(angle);\r\n            const dy = Math.sin(angle);\r\n            const rayCaster = new Raycaster(this.observer, new Vector(dx, dy));\r\n\r\n            const closestIntersect = this.obstructors.reduce((result, barrier) => {\r\n                const intersect = rayCaster.intersect(barrier);\r\n\r\n                if (!intersect) return result;\r\n                if (!result || intersect.param < result.param) {\r\n                    return intersect;\r\n                }\r\n                return result;\r\n            }, null as ({\r\n                distance: number;\r\n                point: Point;\r\n                param: number;\r\n                angle: number;\r\n            } | null));\r\n\r\n            if (!closestIntersect) {\r\n                return intersects;\r\n            } else {\r\n                intersects.push({ ...closestIntersect, angle});\r\n                return intersects;\r\n            }\r\n        }, [] as {\r\n            distance: number;\r\n            point: Point;\r\n            param: number;\r\n            angle: number;\r\n        }[]);\r\n\r\n        intersects.sort((a, b) => a.angle - b.angle);\r\n\r\n        return intersects;\r\n    }\r\n}\r\n\r\nexport default Sight;","import { Container, Graphics } from \"@inlet/react-pixi\";\r\nimport { filters } from \"pixi.js\";\r\nimport React, { useCallback } from \"react\";\r\nimport { video } from \"../config/video\";\r\nimport GLOBAL from \"../constants/global\";\r\nimport Camera from \"../controllers/Camera\";\r\nimport Sight from \"../controllers/Sight\";\r\nimport Point from \"../math/Point\";\r\nimport Vector from \"../math/Vector\";\r\nimport { Layer } from \"../types\";\r\n\r\nconst Component = ({\r\n    camera,\r\n    observer,\r\n    bound,\r\n    blurSize,\r\n    structuresLayer = { visibility: true, images: [], order: 1 },\r\n}: {\r\n    camera: Camera;\r\n    bound: Vector;\r\n    observer: Point;\r\n    blurSize?: number;\r\n    structuresLayer: Layer; \r\n}) => {\r\n    const intersects = new Sight(camera, observer, bound, structuresLayer).area;\r\n    const path = intersects\r\n        .map(intersect => [\r\n            Math.round(intersect.point.x),\r\n            Math.round(intersect.point.y)\r\n        ])\r\n        .flat();\r\n    const blindSpot = useCallback((g: PIXI.Graphics) => {\r\n        g.clear();\r\n        g.beginFill(0x000000);\r\n        g.drawRect(0, 0, video.gridSize * GLOBAL.RENDER_ROWS, video.gridSize * GLOBAL.RENDER_COLUMNS)\r\n        g.beginHole();\r\n        g.drawPolygon(path);\r\n        g.endHole();\r\n        g.endFill();\r\n    }, [path]);\r\n\r\n    return (\r\n        <Container>\r\n            <Graphics draw={blindSpot} filters={blurSize ? [new filters.BlurFilter(blurSize)] : undefined} />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Component;","import { video } from \"../config/video\";\r\nimport Raycaster from \"../core/Raycaster\";\r\nimport Point from \"../math/Point\";\r\nimport Segment from \"../math/Segment\";\r\nimport Vector from \"../math/Vector\";\r\nimport { Layer } from \"../types\";\r\nimport Camera from \"./Camera\";\r\nimport Image from \"../models/Image\";\r\n\r\nclass Light {\r\n    bound: Vector;\r\n    obstructors: Segment[];\r\n    segments: number;\r\n    lightImages: Image[];\r\n\r\n    constructor(\r\n        camera: Camera,\r\n        bound: Vector,\r\n        lightsLayer: Layer,\r\n        structuresLayer: Layer,\r\n        segments: number\r\n    ) {\r\n        this.obstructors = structuresLayer.images.filter(image => image.target.frames)\r\n            .map(image => image.target.frames).flat()\r\n            .map(seg => camera.transform<Segment>(seg));\r\n        this.bound = bound;\r\n        this.segments = segments;\r\n        this.lightImages = lightsLayer.images;\r\n    }\r\n\r\n    public get areas() {\r\n        return this.lightImages.map(lightImage => {\r\n            const angles = [];\r\n\r\n            for (let i = 0; i < this.segments; i++) {\r\n                angles.push(-Math.PI + (i * 2 * Math.PI / this.segments));\r\n            }\r\n\r\n            const vertices = angles.reduce((vertices, angle) => {\r\n                const dx = Math.cos(angle);\r\n                const dy = Math.sin(angle);\r\n                const rayCaster = new Raycaster(\r\n                    lightImage.position.clone().add(new Vector(video.gridSize / 2, video.gridSize / 2)),\r\n                    new Vector(dx, dy),\r\n                    64\r\n                );\r\n\r\n                const closestIntersect = this.obstructors.reduce((result, barrier) => {\r\n                    const intersect = rayCaster.intersect(barrier);\r\n\r\n                    if (!intersect) return result;\r\n                    if (!result || intersect.param < result.param) {\r\n                        return intersect;\r\n                    }\r\n                    return result;\r\n                }, null as ({\r\n                    distance: number;\r\n                    point: Point;\r\n                    param: number;\r\n                    angle: number;\r\n                } | null));\r\n\r\n                if (!closestIntersect) {\r\n                    vertices.push({\r\n                        distance: 64,\r\n                        point: new Point(0, 0).add(rayCaster.ray.at(64)),\r\n                        param: Math.tan(angle),\r\n                        angle\r\n                    });\r\n                    return vertices;\r\n                } else {\r\n                    vertices.push({ ...closestIntersect, angle});\r\n                    return vertices;\r\n                }\r\n            }, [] as {\r\n                distance: number;\r\n                point: Point;\r\n                param: number;\r\n                angle: number;\r\n            }[]);\r\n\r\n            vertices.sort((a, b) => a.angle - b.angle);\r\n\r\n            return {\r\n                lightLevel: lightImage.target.lightLevel,\r\n                vertices\r\n            };\r\n        });\r\n    }\r\n}\r\n\r\nexport default Light;","import React, { memo, useMemo } from 'react';\r\nimport { Container } from '@inlet/react-pixi';\r\nimport Point from '../math/Point';\r\nimport { video } from '../config/video';\r\nimport GLOBAL from '../constants/global';\r\nimport * as PIXI from 'pixi.js';\r\nimport { Layer } from '../types';\r\nimport Camera from '../controllers/Camera';\r\nimport Vector from '../math/Vector';\r\nimport Light from '../controllers/Light';\r\n\r\nconst Component = ({\r\n    renderer,\r\n    camera,\r\n    skylightLevel,\r\n    bound,\r\n    lightsLayer = { visibility: true, images: [], order: 2 },\r\n    structuresLayer = { visibility: true, images: [], order: 1 },\r\n    offset,\r\n    blurSize = 0,\r\n    children\r\n}: {\r\n    renderer: PIXI.Renderer;\r\n    camera: Camera;\r\n    skylightLevel: number;\r\n    bound: Vector;\r\n    lightsLayer: Layer;\r\n    structuresLayer: Layer;\r\n    offset: Point;\r\n    blurSize?: number;\r\n    children: JSX.Element[];\r\n}) => {\r\n    const areas = new Light(camera, bound, lightsLayer, structuresLayer, 36).areas;\r\n    const light = useMemo(() => new PIXI.Graphics(), []);\r\n\r\n    light.clear();\r\n    light.beginFill(0xff0000, skylightLevel * 0.05);\r\n    light.drawRect(0, 0, video.gridSize * GLOBAL.RENDER_ROWS, video.gridSize * GLOBAL.RENDER_COLUMNS);\r\n    areas.forEach(area => {\r\n        const path = area.vertices\r\n            .map(vertex => [\r\n                Math.round(vertex.point.x),\r\n                Math.round(vertex.point.y)\r\n            ])\r\n            .flat();\r\n\r\n        light.beginFill(0xff0000, area.lightLevel * 0.05);\r\n        light.drawPolygon(path);\r\n        light.endFill();\r\n    });\r\n    light.endFill();\r\n\r\n    if (blurSize) {\r\n        light.filters = [new PIXI.filters.BlurFilter(blurSize)];\r\n    }\r\n    \r\n    /**\r\n     * Covert Graphics to Sprite since Graphic can only hold alpha 0/1.\r\n     * Besides, number 0.1 is a magic number. I don't know why.\r\n     * */ \r\n    const lightSprite = new PIXI.Sprite(renderer.generateTexture(\r\n        light,\r\n        PIXI.SCALE_MODES.NEAREST,\r\n        1,\r\n        new PIXI.Rectangle(\r\n            blurSize ? -offset.x * 0.1 : -offset.x,\r\n            blurSize ? -offset.y * 0.1 : -offset.y,\r\n            video.gridSize * GLOBAL.RENDER_COLUMNS,\r\n            video.gridSize * GLOBAL.RENDER_ROWS\r\n        )\r\n    ));\r\n\r\n    return (\r\n        <Container\r\n            mask={lightSprite}\r\n            position={[offset.x, offset.y]}\r\n        >\r\n            {children}\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default memo(Component);","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","class Time {\r\n    static TICK_PERIOD: number = 50;\r\n    static DAY_PERIOD: number = 24000\r\n\r\n    public lastTime: number;\r\n    public dayTime: number;\r\n\r\n    constructor({ lastTime, dayTime }: {\r\n        lastTime: number,\r\n        dayTime: number,\r\n    }) {\r\n        this.lastTime = lastTime;\r\n        this.dayTime = dayTime;\r\n        setInterval(this.update.bind(this), Time.TICK_PERIOD);\r\n    }\r\n\r\n    private update() {\r\n        if (this.dayTime === Time.DAY_PERIOD - 1) {\r\n            this.dayTime = 0;\r\n        } else {\r\n            this.dayTime += 1;\r\n        }\r\n        this.lastTime += 1;\r\n    }\r\n\r\n}\r\n\r\nexport default Time;","import Point from \"../../math/Point\";\r\nimport { LevelInterface, Coordinate } from \"../../types/models\";\r\nimport Time from \"../Time\";\r\nimport { BlocksType, EntitiesType } from \"../../types\";\r\nimport Vector from \"../../math/Vector\";\r\n\r\nabstract class Level implements LevelInterface {\r\n    static UNIT_SIZE = 32;\r\n    \r\n    spawnPos: Point;\r\n    blocks: BlocksType[];\r\n    entities: EntitiesType[];\r\n    lightLevel: number;\r\n    time: Time;\r\n    border: Vector;\r\n\r\n    constructor({ time, lightLevel, spawnPos, blocks, entities, border }: {\r\n        time: Time | { lastTime: number; dayTime: number };\r\n        lightLevel: number;\r\n        spawnPos: Point | Coordinate;\r\n        blocks: BlocksType[];\r\n        entities: EntitiesType[];\r\n        border: Vector | Coordinate;\r\n    }) {\r\n        this.time = time instanceof Time ? time : new Time(time);\r\n        this.lightLevel = lightLevel;\r\n        this.spawnPos = spawnPos instanceof Point ? spawnPos : new Point(spawnPos);\r\n        this.blocks = blocks;\r\n        this.entities = entities;\r\n        this.border = border instanceof Vector ? border : new Vector(border)\r\n    }\r\n\r\n    public getBlock(type: string, pos: Point) {\r\n        return this.blocks.find(block => {\r\n            return block.id === type && Point.isEqual(block.pos, pos)\r\n        });\r\n    }\r\n    \r\n    public updateBlock(source: BlocksType) {\r\n        const index = this.blocks.findIndex(block => {\r\n            return block.id === source.id\r\n                && Point.isEqual(source.pos, block.pos);\r\n        });\r\n        \r\n        this.blocks.splice(index, 1, source);\r\n    }\r\n\r\n    public updateEntity(source: EntitiesType) {\r\n        const index = this.entities.findIndex(entity => {\r\n            return entity.uid === source.uid\r\n        });\r\n        \r\n        this.entities.splice(index, 1, source);\r\n    }\r\n\r\n    public clear(target: EntitiesType) {\r\n        const found = this.entities.find((entity) => entity.uid === target.uid);\r\n    \r\n        if (found) {\r\n          found.destroy();\r\n          this.entities = this.entities.filter(entity => entity.uid !== found.uid);\r\n        } else {\r\n          console.error();\r\n        }\r\n    }\r\n}\r\n\r\nexport default Level;","enum KEYNAME {\r\n    UP_KEY = 'w',\r\n    DOWN_KEY = 's',\r\n    LEFT_KEY = 'a',\r\n    RIGHT_KEY = 'd'\r\n}\r\n\r\nexport default KEYNAME;","import Level from \"./Level\";\r\nimport Point from \"../../math/Point\";\r\nimport Time from \"../Time\";\r\nimport { BlocksType, EntitiesType } from \"../../types\";\r\nimport { Coordinate, SurfaceInterface } from \"../../types/models\";\r\nimport Vector from \"../../math/Vector\";\r\n\r\nclass Surface extends Level implements SurfaceInterface {\r\n    constructor({ time, lightLevel, spawnPos, blocks, entities, border }: {\r\n        time: Time | { lastTime: number; dayTime: number };\r\n        lightLevel: number;\r\n        spawnPos: Point | Coordinate;\r\n        blocks: BlocksType[],\r\n        entities: EntitiesType[],\r\n        border: Vector | Coordinate;\r\n    }) {\r\n        super({ time, lightLevel, spawnPos, blocks, entities, border });\r\n    }\r\n}\r\n\r\nexport default Surface;","import Block from \"../../core/Block\";\r\nimport Vector from \"../../math/Vector\";\r\nimport { Facing } from \"../../types\";\r\nimport { Coordinate } from \"../../types/models\";\r\n\r\nabstract class Entity extends Block {\r\n    uid: string;\r\n    facing: Facing;\r\n    rotation: number;\r\n    speed: number;\r\n    motion: Vector;\r\n\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, motion }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        motion: Coordinate;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete });\r\n        this.uid = uid;\r\n        this.id = id;\r\n        this.facing = facing;\r\n        this.rotation = rotation;\r\n        this.speed = speed;\r\n        this.motion = new Vector(motion)\r\n    }\r\n}\r\n\r\nexport default Entity;","import Entity from './entity/Entity';\r\nimport Point from '../math/Point';\r\nimport { AbilitiesInfo, PlayerInterface, Coordinate } from '../types/models';\r\nimport { Facing } from '../types';\r\nimport Level from './level/Level';\r\nimport Vector from '../math/Vector';\r\nimport { video } from '../config/video';\r\nimport GLOBAL from '../constants/global';\r\nimport Item from './item/Item';\r\n\r\nclass Player extends Entity implements PlayerInterface {\r\n    spawnPos: Point;\r\n    abilities: AbilitiesInfo;\r\n    isMotion: boolean;\r\n    health: number;\r\n    inventory: Item[];\r\n\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, rotation, speed, spawnPos, facing, motion, isMotion, health, inventory }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        rotation: number;\r\n        speed: number;\r\n        spawnPos: Coordinate;\r\n        facing: Facing;\r\n        motion: Coordinate;\r\n        isMotion: boolean;\r\n        health: number;\r\n        inventory: Item[];\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, rotation, speed, facing, motion });\r\n        this.spawnPos = new Point(spawnPos);\r\n        this.abilities = {\r\n            speed: 16,\r\n            acceleration: 4\r\n        }\r\n        this.isMotion = isMotion;\r\n        this.health = health;\r\n        this.inventory = inventory;\r\n    }\r\n\r\n    protected update() {\r\n        super.update();\r\n        if (this.isMotion) {\r\n            this.accelerate();\r\n        } else if (!this.motion.isZero()) {\r\n            this.brake();\r\n        }\r\n        if (!this.motion.isZero()) {\r\n            this.move(this.motion.clone().multiply(GLOBAL.TICK_PER_SEC / video.fps).round());\r\n        }\r\n    }\r\n    \r\n    public brake() {\r\n        const unit = new Vector(Math.cos(this.rotation), -Math.sin(this.rotation));\r\n    \r\n        if (\r\n            Vector.isEqual(\r\n                this.motion\r\n                    .clone()\r\n                    .subtract(unit.clone().multiply(this.abilities.acceleration * GLOBAL.TICK_PER_SEC / video.fps))\r\n                    .normalize()\r\n                    .round(),\r\n                unit.clone().round()\r\n            )\r\n        ) {\r\n            this.motion.subtract(unit.multiply(this.abilities.acceleration * GLOBAL.TICK_PER_SEC / video.fps));\r\n        } else {\r\n            this.motion = new Vector(0, 0);\r\n        }\r\n      }\r\n    \r\n    public accelerate() {\r\n        const unit = new Vector(Math.cos(this.rotation), -Math.sin(this.rotation));\r\n    \r\n        if (\r\n            this.motion\r\n                .clone()\r\n                .add(unit.clone().multiply(this.abilities.acceleration * GLOBAL.TICK_PER_SEC / video.fps)).length >\r\n            this.abilities.speed * GLOBAL.TICK_PER_SEC / video.fps\r\n        ) {\r\n            this.motion = unit.multiply(this.abilities.speed * GLOBAL.TICK_PER_SEC / video.fps);\r\n        } else {\r\n            this.motion.add(unit.clone().multiply(this.abilities.acceleration * GLOBAL.TICK_PER_SEC / video.fps));\r\n        }\r\n    }\r\n    \r\n    public move(vec: Vector) {\r\n        this.pos.add(vec);\r\n    }\r\n\r\n    public moveTo(pos: Point) {\r\n        this.pos.set(pos);\r\n    }\r\n\r\n    public get facingPos(): Point {\r\n        return [\r\n            this.pos.add(Vector.up.multiply(Level.UNIT_SIZE)),\r\n            this.pos.add(Vector.right.multiply(Level.UNIT_SIZE)),\r\n            this.pos.add(Vector.down.multiply(Level.UNIT_SIZE)),\r\n            this.pos.add(Vector.left.multiply(Level.UNIT_SIZE))\r\n        ][this.facing];\r\n    }\r\n}\r\n\r\nexport default Player;","import Level from \"../models/level/Level\";\r\nimport Surface from \"../models/level/Surface\";\r\nimport Player from \"../models/Player\";\r\n\r\nconst world: {\r\n    level: Level;\r\n    players: Player[];\r\n    player: Player;\r\n} = {\r\n    level: new Surface({\r\n        time: {\r\n            lastTime: 0,\r\n            dayTime: 0\r\n        },\r\n        lightLevel: 0,\r\n        spawnPos: { x: 0, y: 0 },\r\n        blocks: [],\r\n        entities: [],\r\n        border: { x: 0, y: 0 }\r\n    }),\r\n    players: [new Player({\r\n        id: 'diatopia:player',\r\n        layer: 2,\r\n        pos: { x: 0, y: 0 },\r\n        aspect: { x: 0, y: 0 },\r\n        isConcrete: true,\r\n        uid: '',\r\n        rotation: 0,\r\n        speed: 0,\r\n        spawnPos: { x: 0, y: 0 },\r\n        facing: 0,\r\n        motion: { x: 0, y: 0 },\r\n        isMotion: false,\r\n        health: 10,\r\n        inventory: []\r\n    })],\r\n    player: new Player({\r\n        id: 'diatopia:player',\r\n        layer: 2,\r\n        pos: { x: 0, y: 0 },\r\n        aspect: { x: 0, y: 0 },\r\n        isConcrete: true,\r\n        uid: '',\r\n        rotation: 0,\r\n        speed: 0,\r\n        spawnPos: { x: 0, y: 0 },\r\n        facing: 0,\r\n        motion: { x: 0, y: 0 },\r\n        isMotion: false,\r\n        health: 10,\r\n        inventory: []\r\n    })\r\n};\r\n\r\nexport default world;\r\n","import Floor from \"./Floor\";\r\nimport Player from \"../Player\";\r\nimport Door from \"./structure/Door\";\r\nimport Wall from \"./structure/Wall\";\r\nimport Torch from \"./light/Torch\";\r\n\r\nconst constructors: {\r\n    [blocksType: string]: any;\r\n} = {\r\n    'diatopia:floor': Floor,\r\n    'diatopia:wall': Wall,\r\n    'diatopia:door': Door,\r\n    'diatopia:torch': Torch,\r\n    'diatopia:player': Player\r\n};\r\n\r\nexport default constructors;","import { Coordinate } from \"../../../types/models\";\r\nimport Light from \"./Light\";\r\n\r\nclass Torch extends Light {\r\n    constructor({ id, layer, pos, aspect, isConcrete, lightLevel }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        lightLevel: number;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, lightLevel });\r\n    }\r\n}\r\n\r\nexport default Torch;","import Block from \"../../../core/Block\";\r\nimport { Coordinate } from \"../../../types/models\";\r\n\r\nabstract class Light extends Block {\r\n    lightLevel: number;\r\n\r\n    constructor({\r\n        id,\r\n        layer,\r\n        pos,\r\n        aspect,\r\n        isConcrete,\r\n        lightLevel\r\n    }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        lightLevel: number;\r\n    }) {\r\n        super({\r\n            id,\r\n            layer,\r\n            pos,\r\n            aspect,\r\n            isConcrete\r\n        });\r\n        this.lightLevel = lightLevel;\r\n    }\r\n}\r\n\r\nexport default Light;","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Entity from \"../Entity\";\r\n\r\nabstract class Mob extends Entity {\r\n    mass: number;\r\n    health: number;\r\n    attributes: any[];\r\n\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        mass: number;\r\n        health: number;\r\n        attributes: any[];\r\n        motion: Coordinate;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, rotation, speed, facing, motion });\r\n        this.mass = mass;\r\n        this.health = health;\r\n        this.attributes = attributes;\r\n    }\r\n}\r\n\r\nexport default Mob;","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Mob from \"./Mob\";\r\n\r\nclass Cow extends Mob {\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        mass: number;\r\n        health: number;\r\n        attributes: any[];\r\n        motion: Coordinate;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion });\r\n    }\r\n}\r\n\r\nexport default Cow;","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Mob from \"./Mob\";\r\n\r\nclass Goat extends Mob {\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        mass: number;\r\n        health: number;\r\n        attributes: any[];\r\n        motion: Coordinate\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion });\r\n    }\r\n}\r\n\r\nexport default Goat;","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Mob from \"./Mob\";\r\n\r\nclass Sheep extends Mob {\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        mass: number;\r\n        health: number;\r\n        attributes: any[];\r\n        motion: Coordinate;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion });\r\n    }\r\n}\r\n\r\nexport default Sheep;","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Mob from \"./Mob\";\r\n\r\nclass Pig extends Mob {\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        mass: number;\r\n        health: number;\r\n        attributes: any[];\r\n        motion: Coordinate;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, mass, health, attributes, motion });\r\n    }\r\n}\r\n\r\nexport default Pig;","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Entity from \"../Entity\";\r\n\r\nabstract class Item extends Entity {\r\n    age: number;\r\n    health: number;\r\n\r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, motion, age, health }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        motion: Coordinate;\r\n        age: number;\r\n        health: number;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, motion });\r\n        this.age = age;\r\n        this.health = health;\r\n    }\r\n}\r\n\r\nexport default Item;\r\n","import Item from \"./Item\";\r\n\r\nclass Door extends Item {\r\n    constructor({ count, slot }: {\r\n        count: number,\r\n        slot?: number,\r\n    }) {\r\n        super({id: 'diatopia:door', count, slot});\r\n    }\r\n}\r\n\r\nexport default Door;\r\n","abstract class Item {\r\n  count: number;\r\n  slot: number | undefined;\r\n  id: string;\r\n\r\n  constructor({id, count, slot}: {\r\n    id: string;\r\n    count: number;\r\n    slot?: number;\r\n  }) {\r\n    this.id = id;\r\n    this.count = count;\r\n    this.slot = slot;\r\n  }\r\n}\r\n\r\nexport default Item;\r\n","import Cow from \"./mobs/Cow\";\r\nimport Goat from \"./mobs/Goat\";\r\nimport Sheep from \"./mobs/Sheep\";\r\nimport Pig from \"./mobs/Pig\";\r\nimport Door from \"./item/Door\";\r\n\r\nconst constructors: {\r\n    [entitiesType: string]: any;\r\n} = {\r\n    'diatopia:goat': Goat,\r\n    'diatopia:cow': Cow,\r\n    'diatopia:sheep': Sheep,\r\n    'diatopia:pig': Pig,\r\n    'diatopia:item': Door,\r\n};\r\n\r\nexport default constructors;\r\n","import { Facing } from \"../../../types\";\r\nimport { Coordinate } from \"../../../types/models\";\r\nimport Item from \"./Item\";\r\nimport DoorItem from \"../../item/Door\";\r\n\r\nclass Door extends Item {\r\n    item: DoorItem;\r\n    \r\n    constructor({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, motion, age, health }: {\r\n        id: string;\r\n        layer: number;\r\n        pos: Coordinate;\r\n        aspect: Coordinate;\r\n        isConcrete: boolean;\r\n        uid: string;\r\n        facing: Facing;\r\n        rotation: number;\r\n        speed: number;\r\n        motion: Coordinate;\r\n        age: number;\r\n        health: number;\r\n    }) {\r\n        super({ id, layer, pos, aspect, isConcrete, uid, facing, rotation, speed, motion, age, health })\r\n        this.item = new DoorItem({ count: 1 });\r\n    }\r\n}\r\n\r\nexport default Door;\r\n","import Door from \"./Door\";\r\n\r\nconst constructors: {\r\n    [itemsType: string]: any;\r\n} = {\r\n    'diatopia:door': Door,\r\n};\r\n\r\nexport default constructors;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { RootState } from \"../../app/store\";\r\nimport initialState from \"../../config/world\";\r\nimport Block from \"../../models/blocks\";\r\nimport Point from \"../../math/Point\";\r\nimport Vector from \"../../math/Vector\";\r\nimport Entity from \"../../models/entity\";\r\nimport Item from \"../../models/item\";\r\nimport Surface from \"../../models/level/Surface\";\r\nimport Player from \"../../models/Player\";\r\nimport { PayloadLevelInit } from \"../../types/reducers\";\r\n\r\nexport const worldSlice = createSlice({\r\n  name: 'players',\r\n  initialState,\r\n  reducers: {\r\n    initLevel(state, action: PayloadAction<any>) {\r\n      const { time, lightLevel, spawnPos, blocks, entities, border }: PayloadLevelInit = action.payload;\r\n\r\n      state.level = new Surface({\r\n        time,\r\n        lightLevel,\r\n        spawnPos,\r\n        blocks: blocks.map(block => new Block[block.id](block)),\r\n        entities: entities.map(entity => new Entity[entity.id](entity)),\r\n        border\r\n      });\r\n    },\r\n    updateLightlevel(state, action: PayloadAction<any>) {\r\n      state.level.lightLevel = action.payload;\r\n    },\r\n    updateStructure(state, action: PayloadAction<any>) {\r\n      state.level.updateBlock(new Block[action.payload.id](action.payload));\r\n    },\r\n    updateEntity(state, action: PayloadAction<any>) {\r\n      state.level.updateEntity(new Entity[action.payload.id](action.payload));\r\n    },\r\n    clearEntity(state, action: PayloadAction<any>) {\r\n      state.level.clear(action.payload);\r\n    },\r\n    initPlayer(state, action: PayloadAction<any>) {\r\n      const player = state.players.find((player) => player.uid === action.payload);\r\n\r\n      if (player) {\r\n          state.player = player;\r\n      } else {\r\n          console.error(`Player ${action.payload.uid} could NOT be found.`);\r\n      }\r\n    },\r\n    movePlayer(state, action: PayloadAction<any>) {\r\n      state.player.moveTo(new Point(action.payload.pos));\r\n      state.player.motion = new Vector(action.payload.motion);\r\n      state.player.rotation = action.payload.rotation;\r\n    },\r\n    initPlayers(state, action: PayloadAction<any>) {\r\n      state.players = action.payload.map((player: Player) => new Player(player));\r\n    },\r\n    removePlayer(state, action: PayloadAction<any>) {\r\n      const i = state.players.findIndex((player) => player.uid === action.payload);\r\n\r\n      state.players.splice(i, 1);\r\n    },\r\n    addPlayer(state, action: PayloadAction<any>) {\r\n      if (state.players.findIndex((player) => player.uid === action.payload.uid) === -1) {\r\n        state.players.push(new Player(action.payload));\r\n      }\r\n    },\r\n    movePlayerById(state, action: PayloadAction<any>) {\r\n      const player = state.players.find((player) => player.uid === action.payload.uid);\r\n\r\n      if (player) {\r\n          player.moveTo(new Point(action.payload.pos));\r\n          player.motion = new Vector(action.payload.motion);\r\n          player.rotation = action.payload.rotation;\r\n          player.isMotion = action.payload.isMotion;\r\n      } else {\r\n          console.error(`Player ${action.payload.uid} could NOT be found.`);\r\n      }\r\n    },\r\n    playersObtain(state, action: PayloadAction<any>) {\r\n      const player = state.players.find((player) => player.uid === action.payload.uid);\r\n\r\n      if (player) {\r\n        const found = player.inventory.find((item) => item.id === action.payload.item.id);\r\n\r\n        if (found) {\r\n          player.inventory = player.inventory.map(item => {\r\n            if (item.slot === action.payload.item.slot) {\r\n              return new Item[action.payload.item.id](action.payload.item);\r\n            } else {\r\n              return item;\r\n            }\r\n          });\r\n        } else {\r\n          player.inventory = [...player.inventory, new Item[action.payload.item.id](action.payload.item)];\r\n        }\r\n      } else {\r\n        console.error(`Player ${action.payload.uid} could NOT be found.`);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  initLevel,\r\n  updateEntity,\r\n  updateLightlevel,\r\n  updateStructure,\r\n  clearEntity,\r\n  initPlayer,\r\n  movePlayer,\r\n  initPlayers,\r\n  removePlayer,\r\n  addPlayer,\r\n  movePlayerById,\r\n  playersObtain\r\n} = worldSlice.actions;\r\n\r\nexport const selectLevel = (state: RootState) => state.world.level;\r\n\r\nexport const selectPlayer = (state: RootState) => state.world.player;\r\n\r\nexport const selectPlayerInventory = (state: RootState) => state.world.player.inventory;\r\n\r\nexport const selectPlayers = (state: RootState) => state.world.players;\r\n\r\nexport default worldSlice.reducer;\r\n","import { useState } from \"react\";\r\nimport { useTick } from \"@inlet/react-pixi\";\r\n\r\nconst useIteration = (inc = 0.1) => {\r\n    const [i, setI] = useState(0);\r\n    \r\n    useTick((delta) => {\r\n      setI(i => i + inc * (delta ? delta : 0));\r\n    });\r\n  \r\n    return i;\r\n};\r\n\r\nexport default useIteration;\r\n","import React from \"react\";\r\nimport Player from \"../../components/Player\";\r\nimport { video } from \"../../config/video\";\r\nimport { Layer } from \"../../types\";\r\n\r\nconst Players = ({ layer }: {\r\n    layer: Layer;\r\n}) => {\r\n    const batch = layer?.images.map((image) =>\r\n        <Player\r\n            key={image.target.uid}\r\n            id={image.target.uid}\r\n            size={video.gridSize}\r\n            x={image.position.x}\r\n            y={image.position.y}\r\n        />\r\n    );\r\n\r\n    return (\r\n        <>{batch}</>\r\n    );\r\n};\r\n\r\nexport default Players;\r\n","import React from \"react\";\r\nimport Door from \"../../components/Door\";\r\nimport Floor from \"../../components/Floor\";\r\nimport Torch from \"../../components/Torch\";\r\nimport Wall from \"../../components/Wall\";\r\nimport { video } from \"../../config/video\";\r\nimport { Layer } from \"../../types\";\r\n\r\nconst Blocks = ({ layer }: {\r\n    layer: Layer;\r\n}) => {\r\n    const batch = layer?.images.map((image) => {\r\n        switch (image.target.id) {\r\n            case 'diatopia:floor':\r\n                return <Floor\r\n                    key={`${image.target.id}(${image.position.x},${image.position.y})`}\r\n                    type={image.target.type}\r\n                    pattern={image.target.pattern}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:door':\r\n                return <Door\r\n                    key={`${image.target.id}(${image.position.x},${image.position.y})`}\r\n                    type={image.target.type}\r\n                    pattern={image.target.pattern}\r\n                    isOpen={image.target.isOpen}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:wall':\r\n                return <Wall\r\n                    key={`${image.target.id}(${image.position.x},${image.position.y})`}\r\n                    type={image.target.type}\r\n                    pattern={image.target.pattern}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:torch':\r\n                return <Torch\r\n                    key={`${image.target.id}(${image.position.x},${image.position.y})`}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            default:\r\n                return null;\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>{batch}</>\r\n    );\r\n};\r\n\r\nexport default Blocks;\r\n","import door from '../assets/door.png';\r\n\r\nconst itemModel: {\r\n    [namespace: string]: string\r\n} = {\r\n    'diatopia:door': door,\r\n};\r\n\r\nexport default itemModel;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFQTFRFFAwcRSQ0MDRt030shk0w06qaTUlNbcPLhpaidXFh3+/XGNBGpQAAAHdJREFUeJxjYGAQVFISZAACQWNnE2NFBgZGk5BUtxBnAQZmNxAj2YBB3c0kGYiSGDSml5cvX1XhxKAxowMIOp0YNJmcVJQUGpwYFEBqzNmdGFRAuiI4nCC6DBuBiqdXVS2vQtWlpKKkpODEIAAx2ZGBKclNBYgSACyKIxxqX5EYAAAAAElFTkSuQmCC\"","import React, { memo } from \"react\";\r\nimport { Sprite } from \"@inlet/react-pixi\";\r\nimport itemModel from \"../constants/itemModel\";\r\nimport useIteration from \"../hooks/useIteration\";\r\n\r\nconst Item = ({ id, x, y }: {\r\n    id: string;\r\n    x: number;\r\n    y: number;\r\n}) => {\r\n    const compensation = 8;\r\n    const shift = 2 * Math.sin(useIteration());\r\n    const rotation = Math.cos(useIteration(0.05));\r\n    \r\n    return (\r\n        <Sprite\r\n            image={itemModel[id]}\r\n            x={compensation + x}\r\n            y={compensation + y + shift}\r\n            scale={[rotation, 1]}\r\n            anchor={0.5}\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(Item);","import React from \"react\";\r\nimport Cow from \"../../components/Cow\";\r\nimport Goat from \"../../components/Goat\";\r\nimport Item from \"../../components/Item\";\r\nimport Pig from \"../../components/Pig\";\r\nimport Sheep from \"../../components/Sheep\";\r\nimport { video } from \"../../config/video\";\r\nimport { Layer } from \"../../types\";\r\n\r\nconst Entities = ({ layer }: {\r\n    layer: Layer;\r\n}) => {\r\n    const batch = layer?.images.map((image) => {\r\n        switch (image.target.id) {\r\n            case 'diatopia:cow':\r\n                return <Cow\r\n                    key={image.target.uid}\r\n                    id={image.target.uid}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:goat':\r\n                return <Goat\r\n                    key={image.target.uid}\r\n                    id={image.target.uid}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:pig':\r\n                return <Pig\r\n                    key={image.target.uid}\r\n                    id={image.target.uid}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:sheep':\r\n                return <Sheep\r\n                    key={image.target.uid}\r\n                    id={image.target.uid}\r\n                    size={video.gridSize}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            case 'diatopia:item':\r\n                return <Item\r\n                    key={image.target.uid}\r\n                    id={image.target.item.id}\r\n                    x={image.position.x}\r\n                    y={image.position.y}\r\n                />\r\n            default:\r\n                return null;\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>{batch}</>\r\n    );\r\n};\r\n\r\nexport default Entities;\r\n","import React, { useRef } from 'react';\r\nimport { video } from '../../config/video';\r\nimport Camera from '../../controllers/Camera';\r\nimport GLOBAL from '../../constants/global';\r\nimport Sight from '../../components/Sight';\r\nimport LightMask from '../../components/LightMask';\r\nimport Vector from '../../math/Vector';\r\nimport { useApp } from '@inlet/react-pixi';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { selectLevel, selectPlayers, selectPlayer } from '../../features/world/worldSlice';\r\nimport useIteration from '../../hooks/useIteration';\r\nimport Players from  './Players';\r\nimport Blocks from './Blocks';\r\nimport Entities from './Entities';\r\n\r\nconst Scene = () => {\r\n    const cameraRef = useRef<Camera>(new Camera(GLOBAL.RENDER_ROWS * video.gridSize));\r\n    const { renderer } = useApp();\r\n    const level = useAppSelector(selectLevel);\r\n    const players = useAppSelector(selectPlayers);\r\n    const player = useAppSelector(selectPlayer);\r\n    useIteration();\r\n\r\n    cameraRef.current.position = player.pos;\r\n\r\n    const layers = cameraRef.current.capture({\r\n        blocks: Object.values(level.blocks),\r\n        entities: Object.values(level.entities),\r\n        players\r\n    });\r\n\r\n    return (\r\n        <LightMask\r\n            renderer={renderer}\r\n            camera={cameraRef.current}\r\n            skylightLevel={level.lightLevel}\r\n            bound={new Vector(video.gridSize * GLOBAL.RENDER_COLUMNS, video.gridSize * GLOBAL.RENDER_ROWS)}\r\n            lightsLayer={layers.blocks}\r\n            structuresLayer={layers.blocks}\r\n            blurSize={4}\r\n            offset={cameraRef.current.offset}\r\n        >\r\n            <Blocks layer={layers.blocks} />\r\n            <Entities layer={layers.entities} />\r\n            <Players layer={layers.players} />\r\n            <Sight\r\n                camera={cameraRef.current}\r\n                bound={new Vector(video.gridSize * GLOBAL.RENDER_COLUMNS, video.gridSize * GLOBAL.RENDER_ROWS)}\r\n                observer={player.pos}\r\n                blurSize={4}\r\n                structuresLayer={layers.blocks}\r\n            />\r\n        </LightMask>\r\n    );\r\n};\r\n\r\nexport default Scene;\r\n","export default __webpack_public_path__ + \"static/media/GUI0.5be9bc10.png\";","import React from \"react\";\r\nimport { TilingSprite } from \"@inlet/react-pixi\";\r\nimport GUIPng from '../../assets/GUI0.png'; \r\n\r\nconst HitPoint = ({index, isFull}: {\r\n    index: number,\r\n    isFull: boolean\r\n}) => {\r\n    const tilePosition = { x: isFull ? 0 : -16, y: -16 };\r\n\r\n    return (\r\n        <TilingSprite\r\n            key={index}\r\n            image={GUIPng}\r\n            tilePosition={tilePosition}\r\n            width={16}\r\n            height={16}\r\n            x={index * 16}\r\n        />\r\n    );\r\n};\r\n\r\nexport default HitPoint;\r\n","import React from 'react';\r\nimport { Container } from '@inlet/react-pixi';\r\nimport HitPoint from './HitPoint';\r\n\r\nconst HealthBar = ({ point }: { point: number }) => {\r\n  const hitPoints = Array.from(\r\n    {\r\n      length: Math.floor(point / 2),\r\n    },\r\n    (v, i) => <HitPoint index={i} isFull={true} key={i} />\r\n  );\r\n\r\n  if (point % 2 === 1) {\r\n    hitPoints.push(\r\n      <HitPoint\r\n        index={hitPoints.length}\r\n        isFull={false}\r\n        key={hitPoints.length}\r\n      />\r\n    );\r\n  }\r\n\r\n  return <Container>{hitPoints}</Container>;\r\n};\r\n\r\nexport default HealthBar;\r\n","import React from \"react\";\r\nimport { Text, Container, Sprite } from \"@inlet/react-pixi\";\r\nimport hotbargridPng from \"../../assets/hotbargrid.png\";\r\nimport { TextStyle } from \"pixi.js\";\r\nimport itemModel from \"../../constants/itemModel\";\r\n\r\nconst HotBarGrid = ({ count, slot, id, position }: {\r\n    count?: number;\r\n    slot?: number;\r\n    id?: string;\r\n    position: [number, number]\r\n}) => {\r\n    return (\r\n        <Container position={position}>\r\n            <Sprite image={hotbargridPng} />\r\n            {id && <Sprite image={itemModel[id]} anchor={0.5} position={[16, 16]} />}\r\n            {count && <Text anchor={0.5} position={[24, 20]} text={count.toString()} style={new TextStyle({fontSize: 14, fill: '#fff'})} />}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default HotBarGrid;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAFFQTFRFzs7Oq6urk5OTbW1tXV1dZ2dnYmJiWlpacHBwR0dHZmZmHh0PJSMSKigSKCcSIyIRIiERfn5+YGBgAAAAgICAIR8Qd3d3JiUSPz0yiYmJhISEkC39FAAAABt0Uk5T/////////////////////////3//////////WQ1hYgAAAJ5JREFUeJy904sKwyAMBVC1vqppV51dH///oYu1MDawCpZdJKAcDAohhBBKKcMc5SddR4qAUo4RAouUinOl4hLi2Oi+R2DsJwDDAOMIMY9pcjWAMW/tM5N0A28EjIlmcNEiJDDPhRuKACAHXumj8sDVgYsWdwGzLI1AlMAfXnEDWNdGoN13tn3HqvUWwvlROJbeH7MpeRpM3BgTjyvAGz7ZOVUi/x16AAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { Container } from '@inlet/react-pixi';\r\nimport { video } from '../../config/video';\r\nimport HotBarGrid from './HotBarGrid';\r\nimport { selectPlayerInventory } from '../../features/world/worldSlice';\r\nimport { useAppSelector } from '../../app/hooks';\r\n\r\nconst HotBar = ({ gridNumber }: {\r\n  gridNumber: number;\r\n}) => {\r\n  const inventory = useAppSelector(selectPlayerInventory);\r\n  const grids = Array.from(\r\n    { length: gridNumber },\r\n    (_v, i) => <HotBarGrid\r\n      key={i}\r\n      {...inventory.find(item => item.slot === i)}\r\n      position={[i * video.gridSize - Math.floor(gridNumber / 2) * video.gridSize, 0]}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Container position={[video.gridSize * 7 / 2, video.gridSize * 6]}>\r\n      {grids}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default HotBar;\r\n","import React from 'react';\r\nimport { Container } from '@inlet/react-pixi';\r\nimport HealthBar from './HUD/HealthBar';\r\nimport HotBar from './HUD/HotBar';\r\nimport { selectPlayer } from '../features/world/worldSlice';\r\nimport { useAppSelector } from '../app/hooks';\r\n\r\nconst UserInterface = () => {\r\n    const player = useAppSelector(selectPlayer);\r\n\r\n    return (\r\n        <Container>\r\n            <HealthBar point={player.health} />\r\n            <HotBar gridNumber={4} />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default UserInterface;\r\n","const ACTION_TYPE = {\r\n    WORLD: {\r\n        UPDATE: 'WORLD_UPDATE'\r\n    },\r\n    LEVEL: {\r\n        INIT: 'LEVEL_INIT',\r\n        UPDATE: {\r\n            LIGHTLEVEL: 'LEVEL_UPDATE_LIGHTLEVEL',\r\n            STRUCTURE:'LEVEL_UPDATE_STRUCTURE',\r\n        },\r\n        CLEAR: {\r\n            ENTITY: 'LEVEL_CLEAR_ENTITY',\r\n        },\r\n    },\r\n    ENTITY: {\r\n        MOB: {\r\n            MOVE: 'ENTITY_MOB_MOVE'\r\n        }\r\n    },\r\n    PLAYER: {\r\n        INIT: 'PLAYER_INIT',\r\n        JOIN: 'PLAYER_JOIN',\r\n        MOVE: 'PLAYER_MOVE',\r\n        INTERACT: 'PLAYER_INTERACT'\r\n    },\r\n    PLAYERS: {\r\n        INIT: 'PLAYERS_INIT',\r\n        JOIN: 'PLAYERS_JOIN',\r\n        LEAVE: 'PLAYERS_LEAVE',\r\n        MOVE: 'PLAYERS_MOVE',\r\n        OBTAIN: 'PLAYERS_OBTAIN',\r\n    }\r\n}\r\n\r\nObject.freeze(ACTION_TYPE);\r\n\r\nexport default ACTION_TYPE;","import { Direction } from \"../types\";\r\nimport ACTION_TYPE from \"./actionType\";\r\n\r\nconst Action = {\r\n    update: () => ({\r\n        type: ACTION_TYPE.WORLD.UPDATE\r\n    }),\r\n    move: (dir: Direction, motion: boolean) => ({\r\n        type: ACTION_TYPE.PLAYER.MOVE,\r\n        payload: {\r\n            dir,\r\n            motion\r\n        }\r\n    }),\r\n    interact: () => ({\r\n        type: ACTION_TYPE.PLAYER.INTERACT,\r\n        payload: null,\r\n    })\r\n};\r\n\r\nObject.freeze(Action);\r\n\r\nexport default Action;","export enum DIRECTION {\r\n    EAST,\r\n    NORTH_EAST,\r\n    NORTH,\r\n    NORTH_WEST,\r\n    WEST,\r\n    SOUTH_WEST,\r\n    SOUTH,\r\n    SOUTH_EAST,\r\n}","import controlConfig from '../config/control';\r\nimport Action from '../constants/action';\r\nimport { DIRECTION } from '../constants/direction';\r\nimport Client from './Client';\r\n\r\nclass Controller {\r\n    private keysPressed: { [keyName: string]: boolean }\r\n    \r\n    constructor() {\r\n        this.keysPressed = {};\r\n    }\r\n\r\n    public setUp(client: Client) {\r\n        document.body.addEventListener('keydown', this.keydownHandler.bind(this, client));\r\n        document.body.addEventListener('keyup', this.keyupHandler.bind(this, client));\r\n    }\r\n\r\n    private keydownHandler(this: Controller, client: Client, evt: KeyboardEvent) {\r\n        if (!this.keysPressed[evt.key]) {\r\n            this.keysPressed[evt.key] = true;\r\n            this.moveControl(client, evt.key);\r\n        }\r\n    }\r\n\r\n    private keyupHandler(this: Controller, client: Client,  evt: KeyboardEvent) {\r\n        delete this.keysPressed[evt.key]\r\n        this.interactControl(client, evt.key);\r\n        this.moveControl(client, evt.key);\r\n    }\r\n\r\n    private interactControl(client: Client, key: string) {\r\n        if (key === 'e' || key === 'E') {\r\n            client.send(Action.interact());\r\n        }\r\n    }\r\n\r\n    private moveControl(client: Client, key: string) {\r\n        const isMotion = Object.keys(this.keysPressed).length !== 0;\r\n\r\n        if ((this.keysPressed['ArrowUp'] || this.keysPressed[controlConfig.UP_KEY]) &&\r\n            (this.keysPressed['ArrowRight'] || this.keysPressed[controlConfig.RIGHT_KEY])\r\n        ) {\r\n            client.send(Action.move(DIRECTION.NORTH_EAST, isMotion))\r\n        } else if ((this.keysPressed['ArrowDown'] || this.keysPressed[controlConfig.DOWN_KEY]) &&\r\n            (this.keysPressed['ArrowRight'] || this.keysPressed[controlConfig.RIGHT_KEY])\r\n        ) {\r\n            client.send(Action.move(DIRECTION.SOUTH_EAST, isMotion))\r\n        } else if ((this.keysPressed['ArrowDown'] || this.keysPressed[controlConfig.DOWN_KEY]) &&\r\n            (this.keysPressed['ArrowLeft'] || this.keysPressed[controlConfig.LEFT_KEY])\r\n        ) {\r\n            client.send(Action.move(DIRECTION.SOUTH_WEST, isMotion))\r\n        } else if ((this.keysPressed['ArrowUp'] || this.keysPressed[controlConfig.UP_KEY]) &&\r\n            (this.keysPressed['ArrowLeft'] || this.keysPressed[controlConfig.LEFT_KEY])\r\n        ) {\r\n            client.send(Action.move(DIRECTION.NORTH_WEST, isMotion))\r\n        } else if (this.keysPressed['ArrowUp'] || this.keysPressed[controlConfig.UP_KEY]) {\r\n            client.send(Action.move(DIRECTION.NORTH, isMotion))\r\n        } else if (this.keysPressed['ArrowRight'] || this.keysPressed[controlConfig.RIGHT_KEY]) {\r\n            client.send(Action.move(DIRECTION.EAST, isMotion))\r\n        } else if (this.keysPressed['ArrowDown'] || this.keysPressed[controlConfig.DOWN_KEY]) {\r\n            client.send(Action.move(DIRECTION.SOUTH, isMotion))\r\n        } else if (this.keysPressed['ArrowLeft'] || this.keysPressed[controlConfig.LEFT_KEY]) {\r\n            client.send(Action.move(DIRECTION.WEST, isMotion))\r\n        } else {\r\n            switch (key) {\r\n                case 'ArrowUp':\r\n                case controlConfig.UP_KEY:\r\n                    client.send(Action.move(DIRECTION.NORTH, isMotion));\r\n                    break;\r\n                case 'ArrowDown':\r\n                case controlConfig.DOWN_KEY:\r\n                    client.send(Action.move(DIRECTION.SOUTH, isMotion));\r\n                    break;\r\n                case 'ArrowLeft':\r\n                case controlConfig.LEFT_KEY:\r\n                    client.send(Action.move(DIRECTION.WEST, isMotion));\r\n                    break;\r\n                case 'ArrowRight':\r\n                case controlConfig.RIGHT_KEY:\r\n                    client.send(Action.move(DIRECTION.EAST, isMotion));\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Controller;","import React, { useEffect } from 'react';\r\nimport Scene from './scene/Scene';\r\nimport UserInterface from './UserInterface';\r\nimport Controller from '../controllers/control';\r\nimport receiver from '../controllers/receiver';\r\nimport Client from '../controllers/Client';\r\nimport { useAppDispatch } from '../app/hooks';\r\n\r\nconst Main = ({ username, location, clientRef}: {\r\n    username: string;\r\n    location: string;\r\n    clientRef: React.MutableRefObject<Client>;\r\n}) => {\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n        if (window.WebSocket) {\r\n\t\t\tclientRef.current.connect(\r\n\t\t\t\t{ username },\r\n\t\t\t\tlocation,\r\n\t\t\t\t() => {\r\n                    const controller = new Controller();\r\n\r\n\t\t\t\t\tcontroller.setUp(clientRef.current);\r\n                    clientRef.current.onAction(() => {\r\n                        clientRef.current.release().then(actions => {\r\n                            actions.forEach(action => receiver(dispatch, action));\r\n                        });\r\n                    });\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\talert(\"WebSocket not supported by your browser!\");\r\n\t\t}\r\n    }, [clientRef, username, location, dispatch]);\r\n\r\n    return (\r\n        <>\r\n            <Scene />\r\n            <UserInterface />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Main;\r\n","enum STAGE_TYPE {\r\n    TITLE,\r\n    MAIN,\r\n}\r\n\r\nexport default STAGE_TYPE;\r\n","import ACTION_TYPE from \"../constants/actionType\";\r\nimport Surface from \"../models/level/Surface\";\r\nimport Player from \"../models/Player\";\r\nimport { ThunkDispatch, AnyAction, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { Dispatch } from \"react\";\r\nimport { clearEntity, initLevel, playersObtain, updateEntity, updateLightlevel, updateStructure } from \"../features/world/worldSlice\";\r\nimport { initPlayers, removePlayer, addPlayer, movePlayerById, movePlayer, initPlayer } from \"../features/world/worldSlice\";\r\n\r\nexport default function receiver(\r\n    dispatch: ThunkDispatch<{\r\n        players: Map<string, Player>;\r\n        level: Surface;\r\n    }, null, AnyAction> & ThunkDispatch<{\r\n        players: Map<string, Player>;\r\n        level: Surface;\r\n    }, undefined, AnyAction> & Dispatch<AnyAction>,\r\n    action: PayloadAction<any>\r\n) {\r\n    switch (action.type) {\r\n        case ACTION_TYPE.LEVEL.INIT:\r\n            dispatch(initLevel(action.payload));\r\n            break;\r\n        case ACTION_TYPE.LEVEL.UPDATE.LIGHTLEVEL:\r\n            dispatch(updateLightlevel(action.payload));\r\n            break;\r\n        case ACTION_TYPE.LEVEL.UPDATE.STRUCTURE:\r\n            dispatch(updateStructure(action.payload));\r\n            break;\r\n        case ACTION_TYPE.LEVEL.CLEAR.ENTITY:\r\n            dispatch(clearEntity(action.payload));\r\n            break;\r\n        case ACTION_TYPE.ENTITY.MOB.MOVE:\r\n            dispatch(updateEntity(action.payload));\r\n            break;\r\n        case ACTION_TYPE.PLAYER.INIT:\r\n            dispatch(initPlayer(action.payload));\r\n            break;\r\n        case ACTION_TYPE.PLAYER.MOVE:\r\n            dispatch(movePlayer(action.payload));\r\n            break;\r\n        case ACTION_TYPE.PLAYERS.INIT:\r\n            dispatch(initPlayers(action.payload))\r\n            break;\r\n        case ACTION_TYPE.PLAYERS.LEAVE:\r\n            dispatch(removePlayer(action.payload));\r\n            break;\r\n        case ACTION_TYPE.PLAYERS.JOIN:\r\n            dispatch(addPlayer(action.payload));\r\n            break;\r\n        case ACTION_TYPE.PLAYERS.MOVE:\r\n            dispatch(movePlayerById(action.payload));\r\n            break;\r\n        case ACTION_TYPE.PLAYERS.OBTAIN:\r\n            dispatch(playersObtain(action.payload));\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}","import React from \"react\";\r\nimport { TextStyle } from \"pixi.js\";\r\nimport { Container, Text } from \"@inlet/react-pixi\";\r\nimport GLOBAL from \"../constants/global\";\r\nimport { video } from \"../config/video\";\r\nimport STAGE_TYPE from \"../constants/stageType\";\r\n\r\nconst Title = ({setStage}: {\r\n    setStage: React.Dispatch<React.SetStateAction<STAGE_TYPE>>;\r\n}) => {\r\n    const playClickHandler = (event: PIXI.InteractionEvent) => {\r\n        setStage(STAGE_TYPE.MAIN);\r\n    };\r\n    \r\n    return (\r\n        <Container>\r\n            <Text\r\n                text=\"Diatopia\"\r\n                anchor={0.5}\r\n                x={GLOBAL.VIEWPORT_COLUMNS * video.gridSize / 2}\r\n                y={GLOBAL.VIEWPORT_ROWS * video.gridSize / 4}\r\n                style={\r\n                    new TextStyle({\r\n                        fontFamily: '\"Source Sans Pro\", Helvetica, sans-serif',\r\n                        fontSize: 50,\r\n                        fill: '#ffffff',\r\n                        strokeThickness: 5,\r\n                    })\r\n                }\r\n            />\r\n            <Text\r\n                buttonMode={true}\r\n                interactive={true}\r\n                click={playClickHandler}\r\n                text=\"Play\"\r\n                anchor={0.5}\r\n                x={GLOBAL.VIEWPORT_COLUMNS * video.gridSize / 2}\r\n                y={GLOBAL.VIEWPORT_ROWS * video.gridSize / 2}\r\n                style={\r\n                    new TextStyle({\r\n                        fontFamily: '\"Source Sans Pro\", Helvetica, sans-serif',\r\n                        fontSize: 18,\r\n                        fill: '#ffffff',\r\n                        strokeThickness: 5,\r\n                    })\r\n                }\r\n            />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Title;\r\n","import { EventEmitter } from \"events\";\r\nimport ACTION_TYPE from \"../constants/actionType\";\r\nimport { PayloadAction } from \"@reduxjs/toolkit\";\r\nclass Client extends EventEmitter {\r\n    private user: Object | undefined;\r\n    private ws: WebSocket | undefined;\r\n    private buffer: PayloadAction<any>[];\r\n    private callback: ((...args: any[]) => void) | undefined;\r\n\r\n    constructor() {\r\n        super();\r\n        this.buffer = [];\r\n    }\r\n\r\n    public get readyState(): number {\r\n        if (this.ws) {\r\n            return this.ws.readyState;\r\n        }\r\n        return WebSocket.CLOSED;\r\n    }\r\n\r\n    public onAction(listener: (actions: PayloadAction<any>[]) => void) {\r\n        this.on('action', listener);\r\n    }\r\n\r\n    public connect(user: Object, url: string, callback?: (...args: any[]) => void, protocols?: string | string[] | undefined) {\r\n        this.ws = new WebSocket(url, protocols);\r\n        this.user = user;\r\n        this.callback = callback;\r\n        this.setUp();\r\n    }\r\n\r\n    public release(): Promise<PayloadAction<any>[]> {\r\n        return new Promise((resolve: (value: PayloadAction<any>[]) => void) => {\r\n            resolve(this.buffer.splice(0, this.buffer.length));\r\n        });\r\n    }\r\n\r\n    public send(action: PayloadAction<any>) {\r\n        if (this.ws) {\r\n            this.ws.send(JSON.stringify(action));\r\n        } else {\r\n            throw Error('Server is not connected.')\r\n        }\r\n    }\r\n\r\n    private setUp() {\r\n        if (this.ws) {\r\n            this.ws.onclose = function (e) {\r\n                console.log('Connection is closed', e);\r\n            };\r\n            this.ws.onerror = function (e) {\r\n                console.error('WebSocket got error', e);\r\n            };\r\n            this.ws.onmessage = function (this: Client, e: MessageEvent) {\r\n                const actions: PayloadAction<any>[] = JSON.parse(e.data);\r\n\r\n                this.buffer = this.buffer.concat(actions);\r\n                this.emit('action', this.buffer);\r\n            }.bind(this);\r\n            this.ws.onopen = function (this: Client, e: Event) {\r\n                console.log('WebSocket is connecting', e);\r\n                if (this.callback) {\r\n                    this.callback();\r\n                }\r\n                this.ws?.send(JSON.stringify({\r\n                    type: ACTION_TYPE.PLAYER.JOIN,\r\n                    payload: this.user\r\n                }));\r\n            }.bind(this);\r\n        } else {\r\n            throw Error('Server is not connected.')\r\n        }\r\n    }\r\n}\r\n\r\nexport default Client;","import React, { useRef, useState } from 'react';\r\nimport { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport { Provider } from 'react-redux';\r\nimport { video } from '../config/video';\r\nimport GLOBAL from '../constants/global';\r\nimport Viewport from '../components/Viewport';\r\nimport Main from './Main';\r\nimport Title from './Title';\r\nimport STAGE_TYPE from '../constants/stageType';\r\nimport world from \"../features/world/worldSlice\";\r\nimport Client from '../controllers/Client';\r\n\r\nconst store = configureStore({\r\n    reducer: {\r\n        world\r\n    },\r\n    middleware: getDefaultMiddleware({\r\n        serializableCheck: false\r\n    })\r\n});\r\nconst App = ({ username, location }: {\r\n    username: string;\r\n    location: string;\r\n}) => {\r\n    const clientRef = useRef(new Client());\r\n    const [stage, setStage] = useState(STAGE_TYPE.TITLE)\r\n\r\n    return (\r\n        <Viewport\r\n            width={video.gridSize * GLOBAL.VIEWPORT_COLUMNS}\r\n            height={video.gridSize * GLOBAL.VIEWPORT_ROWS}\r\n        >\r\n            <Provider store={store}>\r\n            {stage === STAGE_TYPE.TITLE && \r\n                <Title\r\n                    setStage={setStage}\r\n                />\r\n            }\r\n            {stage === STAGE_TYPE.MAIN &&\r\n                <Main\r\n                    username={username}\r\n                    location={location}\r\n                    clientRef={clientRef}\r\n                />\r\n            }\r\n            </Provider>\r\n        </Viewport>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React, { useRef, useState } from \"react\";\r\nimport App from \"./App\";\r\n\r\nconst Entry = () => {\r\n\tconst usernameEl = useRef<HTMLInputElement>(null!);\r\n\tconst locationEl = useRef<HTMLInputElement>(null!);\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [location, setLocation] = useState('ws://localhost:443/websocket');\r\n\r\n\tconst handlePlayClick = () => {\r\n\t\tif (usernameEl.current.value) {\r\n\t\t\tsetUsername(usernameEl.current.value);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLocationChange = () => {\r\n\t\tif (locationEl.current.value) {\r\n\t\t\tsetLocation(locationEl.current.value);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{username ? <App username={username} location={location} /> : \r\n\t\t\t\t<div>\r\n\t\t\t\t\tusername: <input ref={usernameEl} type=\"text\" />\r\n\t\t\t\t\tlocation: <input ref={locationEl} type=\"text\" placeholder=\"ws://localhost:443/websocket\" onChange={handleLocationChange} />\r\n\t\t\t\t\t<button onClick={handlePlayClick}>Play</button>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Entry;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport Entry from './containers/Entry';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './index.css';\r\n\r\nconst MOUNT_NODE = document.getElementById('dr') as HTMLDivElement;\r\n\r\nrender(\r\n    <Entry />,\r\n    MOUNT_NODE\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}